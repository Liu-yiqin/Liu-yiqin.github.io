<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>C#语言入门详解 | 刘一钦的成长之路</title><meta name="keywords" content="C#"><meta name="author" content="刘一钦"><meta name="copyright" content="刘一钦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="C#语言入门详解 一、类与成员1.1 初步介绍123456789101112131415161718192021namespace ConsoleHelloWorld&amp;#123;    class Program    &amp;#123;        static void Main(string[] args)        &amp;#123;            Form myForm1;&#x2F;&#x2F;m">
<meta property="og:type" content="article">
<meta property="og:title" content="C#语言入门详解">
<meta property="og:url" content="http://example.com/2021/03/07/C-sharp/index.html">
<meta property="og:site_name" content="刘一钦的成长之路">
<meta property="og:description" content="C#语言入门详解 一、类与成员1.1 初步介绍123456789101112131415161718192021namespace ConsoleHelloWorld&amp;#123;    class Program    &amp;#123;        static void Main(string[] args)        &amp;#123;            Form myForm1;&#x2F;&#x2F;m">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210731140002.jpg">
<meta property="article:published_time" content="2021-03-06T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-06T16:00:00.000Z">
<meta property="article:author" content="刘一钦">
<meta property="article:tag" content="C#">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210731140002.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/03/07/C-sharp/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-07 00:00:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/logo.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休闲</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210731140002.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">刘一钦的成长之路</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休闲</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">C#语言入门详解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-06T16:00:00.000Z" title="发表于 2021-03-07 00:00:00">2021-03-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-06T16:00:00.000Z" title="更新于 2021-03-07 00:00:00">2021-03-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C/">C#</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">17k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>76分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="C#语言入门详解"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><meta name="referrer" content="no-referrer" />

<blockquote>
<h1 id="C-语言入门详解"><a href="#C-语言入门详解" class="headerlink" title="C#语言入门详解"></a>C#语言入门详解</h1></blockquote>
<h2 id="一、类与成员"><a href="#一、类与成员" class="headerlink" title="一、类与成员"></a>一、类与成员</h2><h3 id="1-1-初步介绍"><a href="#1-1-初步介绍" class="headerlink" title="1.1 初步介绍"></a>1.1 初步介绍</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleHelloWorld</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Form myForm1;<span class="comment">//myForm1与myForm2是引用变量，引用的是new Form()这个实例。</span></span><br><span class="line">            Form myForm2;</span><br><span class="line">            myForm1 = <span class="keyword">new</span> Form();<span class="comment">//new Form()是创造一个Form的对象，或者叫实例。</span></span><br><span class="line">                                 <span class="comment">//new操作符创建类的实例。</span></span><br><span class="line">            myForm2 = myForm1;</span><br><span class="line">            myForm1.Text = <span class="string">&quot;My Form!&quot;</span>;</span><br><span class="line">            myForm2.Text = <span class="string">&quot;I changed it!&quot;</span>;</span><br><span class="line">            myForm1.ShowDialog();<span class="comment">//可以看出myForm1与myForm2引用的是同一个对象。</span></span><br><span class="line">                                 <span class="comment">//调用myForm1中的非静态成员函数ShowDialog()。(因为这是对象的函数)</span></span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Hello!&quot;</span>);<span class="comment">//调用Console类中的静态方法WriteLine。</span></span><br><span class="line">                                        <span class="comment">//静态方法隶属于这个类，只能用类名来调用不能用实例来调用。</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>myForm1.ShowDialog();</code>输出结果为：</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210512144143.png" alt="QQ截图20210512143831"></p>
<h3 id="1-2-罗汉塔-递归"><a href="#1-2-罗汉塔-递归" class="headerlink" title="1.2 罗汉塔(递归)"></a>1.2 罗汉塔(递归)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Tower_of_Hanoi</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Calculator c = <span class="keyword">new</span> Calculator();</span><br><span class="line">            <span class="built_in">long</span> result = c.MoveTimes(<span class="number">31</span>);</span><br><span class="line">            Console.WriteLine(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Calculator</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  <span class="built_in">int</span> <span class="title">MoveTimes</span>(<span class="params"><span class="built_in">int</span> x</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (x == <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span> + MoveTimes(x - <span class="number">1</span>) * <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>规则要求小盘子必须在大盘子之上。试想这个过程中，必然会经历那么一个步骤，即有一大坨N-1个盘子在B针这个中转站，而我们正将最大那个盘子（即第N个盘子）从A针移动至C针。只有经历“移动最大盘子”这个步骤，余下的事情才有可能实现。而在此之前，我们所要做的事情，就是让“移动最大盘子”这个步骤得以实现。</li>
<li>现在，游戏整个过程以“移动最大盘子”为中央，被分为了两部分。即（前）“将那坨N-1个盘子从A针移动到B针”，(中)“移动最大盘子”，(后)“将坨N-1个盘子从B针移动到C针”。这时我们意识到，（前）与（后）操作道理是相似的。不去管那个最大盘子，（前）是以C针为中转站，（后）是以A针为中转站。因此两者所需的移动次数应当是相等的。这意味着我们只要计算出其中一者的移动次数，然而乘以2，在加上“移动最大盘子”的那1次，就是这场游戏的总移动次数了。用数学语言表达，假设（前）“将N-1个盘子从A针移动到B针”所需次数为Hn-1，总移动次数为Hn，那么可以得出的关系就是：Hn=Hn-1x 2 + 1.</li>
</ul>
<h2 id="二、变量与与对象"><a href="#二、变量与与对象" class="headerlink" title="二、变量与与对象"></a>二、变量与与对象</h2><h3 id="2-1-变量与地址"><a href="#2-1-变量与地址" class="headerlink" title="2.1 变量与地址"></a>2.1 变量与地址</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Variate</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu;<span class="comment">//声明引用类型变量时统一分配4个字节（32比特）的地址。引用变量中存的就是实例的地址。</span></span><br><span class="line">            stu = <span class="keyword">new</span> Student();<span class="comment">//new Student()在堆内存中寻找地址，创建一个Student的实例；</span></span><br><span class="line">                                <span class="comment">//此实例是包含了ID与Score两个变量的实体。</span></span><br><span class="line">                                <span class="comment">//之后把该实例在堆内存中的地址保存在stu这个变量里。</span></span><br><span class="line">                                <span class="comment">//所以stu变量中存的值是new Student()实例在堆内存的地址。</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> <span class="built_in">int</span> x = <span class="number">100</span>;<span class="comment">//const常量：(1)初始化器不可省略。 (2)不可更改其值。</span></span><br><span class="line"></span><br><span class="line">            <span class="built_in">int</span> y = <span class="number">100</span>;<span class="comment">//y为值类型变量。</span></span><br><span class="line">            <span class="built_in">object</span> obj;</span><br><span class="line">            obj = y;         <span class="comment">//把栈上值类型的值存到堆上，记录存入的堆的地址，再把该地址存到obj上。</span></span><br><span class="line">                             <span class="comment">//装箱：把栈上值类型的值封装成object的实例放在堆上。</span></span><br><span class="line">            <span class="built_in">int</span> z = (<span class="built_in">int</span>)obj;<span class="comment">//让值类型的变量z拿到obj在堆上的整数值。</span></span><br><span class="line">                             <span class="comment">//拆箱：把堆上object类型的实例里面的值拆成目标数据类型存储到栈上。</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">uint</span> ID;</span><br><span class="line">        <span class="built_in">ushort</span> Score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>内存中：堆一般存的是实例，栈存的是方法与局部变量。</li>
<li>C#五大数据类型：类、结构体、枚举、接口、委托。</li>
<li>变量=以变量名所对应的内存地址为起点、以其数据类型所要求的的存储空间为长度的一块内存区域。</li>
<li>变量分为7种：静态变量、实例变量（成员变量、字段）、数组元素、值参数、引用参数、输出参数、局部变量。</li>
<li>计算机存储负数：每一位都按位取反再加一。</li>
<li>成员变量可以没有默认值，显示变量一定要有默认值。</li>
</ul>
<p>引用变量与实例内存的图示：</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210512153742.png" alt="引用变量与实例的内存"></p>
<h2 id="三、方法的定义与调用"><a href="#三、方法的定义与调用" class="headerlink" title="三、方法的定义与调用"></a>三、方法的定义与调用</h2><h3 id="3-1-类的构造函数"><a href="#3-1-类的构造函数" class="headerlink" title="3.1 类的构造函数"></a>3.1 类的构造函数</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Constructor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu1 = <span class="keyword">new</span> Student(<span class="number">6</span>, <span class="string">&quot;Mr.Liu&quot;</span>);<span class="comment">//这里&quot;Mr.Liu&quot;是string类型的一个实例（因为string类型是“类“类型                                                    //不是“值”类型）。</span></span><br><span class="line">                                                   <span class="comment">//所以还需要去堆内存中找一段可以容纳Mr.Liu字符串的地址，</span></span><br><span class="line">                                                   <span class="comment">//把地址传回new Student(6, &quot;Mr.Liu&quot;)在堆中的存储区域。</span></span><br><span class="line">                                                   <span class="comment">//所以此时new Student(6, &quot;Mr.Liu&quot;)在堆内存中存储的是6的二进制值</span></span><br><span class="line">                                                   <span class="comment">//和Mr.Liu在另一块堆内存的地址。</span></span><br><span class="line">                                                   <span class="comment">//所以创建引用变量stu时出现了两次内存的转储。</span></span><br><span class="line">            Console.WriteLine(stu1.ID);</span><br><span class="line">            Console.WriteLine(stu1.Name);</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line"></span><br><span class="line">            Student stu2 = <span class="keyword">new</span> Student();</span><br><span class="line">            Console.WriteLine(stu2.ID);</span><br><span class="line">            Console.WriteLine(stu2.Name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Student</span>(<span class="params"><span class="built_in">int</span> initID, String initName</span>)<span class="comment">//带参数的构造器</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.ID = initID;</span><br><span class="line">            <span class="keyword">this</span>.Name = initName;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Student</span>(<span class="params"></span>)<span class="comment">//不带参数的构造器</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.ID = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">this</span>.Name = <span class="string">&quot;No name&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> ID;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>当一个“函数”以类或结构体的成员出现时就叫“方法”。</li>
<li>形参是定义函数时写的，是变量；实参是声明函数时给的，是值。</li>
</ul>
<h3 id="3-2-方法的重载"><a href="#3-2-方法的重载" class="headerlink" title="3.2 方法的重载"></a>3.2 方法的重载</h3><ol>
<li>方法重载定义：当你为一个类创建方法时，方法的名字可以一样，但方法的签名不能一样。eg:Console.WriteLine()方法就有很多重载。</li>
<li>方法签名：由方法的名称、类型形参的个数和它的每一个形参(从左到右顺序)的类型和种类(值、引用或输出)组成。</li>
</ol>
<p>​                   PS: a.方法签名不包含返回值类型</p>
<p>​                          b.构造函数也可以有重载</p>
<ol start="3">
<li>重载决策：当有多个重载函数时，根据所给参数不同，决定用什么重载。</li>
</ol>
<h2 id="四、操作符详解"><a href="#四、操作符详解" class="headerlink" title="四、操作符详解"></a>四、操作符详解</h2><h3 id="4-1-操作符的优先级"><a href="#4-1-操作符的优先级" class="headerlink" title="4.1 操作符的优先级"></a>4.1 操作符的优先级</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210512155332.png" alt="操作符优先级"></p>
<h3 id="4-2-不丢失精度的隐式类型转换"><a href="#4-2-不丢失精度的隐式类型转换" class="headerlink" title="4.2 不丢失精度的隐式类型转换"></a>4.2 不丢失精度的隐式类型转换</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210516210649.png" alt="不丢失精度的类型转换"></p>
<h3 id="4-3-操作符-1"><a href="#4-3-操作符-1" class="headerlink" title="4.3 操作符(1)"></a>4.3 操作符(1)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Operator1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span>[] myIntArray = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">            <span class="built_in">int</span>[] myIntArry2 = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;;</span><br><span class="line">            <span class="built_in">int</span>[] myIntArry3 = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">10</span>];                 <span class="comment">//几种方法创建数组</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> person = <span class="keyword">new</span> &#123; Name = <span class="string">&quot;Mr.Okay&quot;</span>, Age = <span class="number">34</span> &#125;;<span class="comment">//new为匿名类型创建对象，并且用隐式类型变量来引用此实例。</span></span><br><span class="line">            Console.WriteLine(person.Name);</span><br><span class="line">            Console.WriteLine(person.Age);</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;===============&quot;</span>);</span><br><span class="line">            Stone stone = <span class="keyword">new</span> Stone();</span><br><span class="line">            stone.Age = <span class="number">5000</span>;</span><br><span class="line">            Monkey wukongSun = (Monkey)stone;<span class="comment">//自定义的类型转换</span></span><br><span class="line">            Console.WriteLine(wukongSun.Age);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Stone</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Age;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="title">Monkey</span>(<span class="params">Stone stone</span>)<span class="comment">//显示类型转换操作符可以理解成一个转换类型的构造器</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Monkey m = <span class="keyword">new</span> Monkey();</span><br><span class="line">            m.Age = stone.Age / <span class="number">500</span>;</span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Monkey</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//带有赋值功能的操作符的运算顺序是由右向左；不带赋值功能的操作符运算顺序是从左向右。</span></span><br><span class="line"><span class="comment">//计算机语言没有同优先级的“结合律”。</span></span><br><span class="line"><span class="comment">//typeof操作符作用：查看一个类型的内部结构。</span></span><br><span class="line"><span class="comment">//default操作符作用：获取一个类型的默认值。</span></span><br><span class="line"><span class="comment">//checked操作符作用：检测是否溢出。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类型转换：1.隐式类型转换(可以直接进行转换，没有额外操作)</span></span><br><span class="line"><span class="comment">//            a.不丢失精度的转换</span></span><br><span class="line"><span class="comment">//            b.子类向父类的转换(1.当用引用变量访问所引用的实例的成员时，只能访问到变量的类型具有的成员。2.父类不能用子类的成 //              员)</span></span><br><span class="line"><span class="comment">//            c.装箱</span></span><br><span class="line"><span class="comment">//          2.显示类型转换(需要进行额外的操作)</span></span><br><span class="line"><span class="comment">//            a.有可能丢失精度(甚至发生错误)的转换，即cast</span></span><br><span class="line"><span class="comment">//            b.拆箱</span></span><br><span class="line"><span class="comment">//            c.使用Convert类</span></span><br><span class="line"><span class="comment">//            d.ToString方法与各数据类型的Parse/TryParse方法</span></span><br><span class="line"><span class="comment">//          3.自定义类型转换操作符</span></span><br><span class="line"><span class="comment">//            a.如上例</span></span><br></pre></td></tr></table></figure>



<h3 id="4-4-操作符-2"><a href="#4-4-操作符-2" class="headerlink" title="4.4 操作符(2)"></a>4.4 操作符(2)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Operator2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> x = <span class="number">7</span>;</span><br><span class="line">            <span class="built_in">int</span> y = x &lt;&lt; <span class="number">2</span>;<span class="comment">//x向左移一位并赋给y</span></span><br><span class="line">            <span class="built_in">string</span> strX = Convert.ToString(x, <span class="number">2</span>).PadLeft(<span class="number">32</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            <span class="built_in">string</span> strY = Convert.ToString(y, <span class="number">2</span>).PadLeft(<span class="number">32</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            Console.WriteLine(strX);</span><br><span class="line">            <span class="comment">//00000000000000000000000000000111</span></span><br><span class="line">            Console.WriteLine(strY);</span><br><span class="line">            <span class="comment">//00000000000000000000000000011100</span></span><br><span class="line">            Console.WriteLine(y);</span><br><span class="line">            <span class="comment">//28</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//进行加减乘除和取余运算时，在不影响精度的情况下会进行“数值提升”(把数据的类型提升到更大范围的数据类型)</span></span><br><span class="line"><span class="comment">//移位规定：左移时，无论正负都补0；数据乘2。(不溢出时)</span></span><br><span class="line"><span class="comment">//          右移时，正数补0，负数补1；数据除2。(不溢出时)</span></span><br></pre></td></tr></table></figure>

<p>注：PadLeft方法：</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210516214704.png" alt="QQ截图20210516214407"></p>
<h3 id="4-5-操作符-3"><a href="#4-5-操作符-3" class="headerlink" title="4.5 操作符(3)"></a>4.5 操作符(3)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Operator3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">//Teacher T = (Teacher)new Human();错误</span></span><br><span class="line">            Teacher t = <span class="keyword">new</span> Teacher();<span class="comment">//引用变量只能被赋予其子类或是同类，不能被赋予父类</span></span><br><span class="line">            <span class="built_in">object</span> o = <span class="keyword">new</span> Teacher();</span><br><span class="line">            Human h = <span class="keyword">new</span> Teacher();</span><br><span class="line">            <span class="comment">//Console.WriteLine(h.Teach);错误(原因在下文注释)</span></span><br><span class="line">            <span class="keyword">var</span> result1 = t <span class="keyword">is</span> Animal;</span><br><span class="line">            <span class="keyword">var</span> result2 = o <span class="keyword">is</span> Teacher;</span><br><span class="line">            <span class="keyword">var</span> result3 = h <span class="keyword">is</span> Teacher;<span class="comment">//父类是子类</span></span><br><span class="line">            <span class="keyword">var</span> result4 = t <span class="keyword">is</span> Human;<span class="comment">//子类也是父类</span></span><br><span class="line">            Console.WriteLine(result1.GetType().FullName);</span><br><span class="line">            <span class="comment">//System.Boolean</span></span><br><span class="line">            Console.WriteLine(result1);</span><br><span class="line">            <span class="comment">//True</span></span><br><span class="line">            Console.WriteLine(result2);</span><br><span class="line">            <span class="comment">//True</span></span><br><span class="line">            Console.WriteLine(result3);</span><br><span class="line">            <span class="comment">//True</span></span><br><span class="line">            Console.WriteLine(result4);</span><br><span class="line">            <span class="comment">//True</span></span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;=========================&quot;</span>);</span><br><span class="line">            Teacher T = o <span class="keyword">as</span> Teacher;<span class="comment">//如果o是Teacher就把o对象的地址交给T，否则就把null值交给T</span></span><br><span class="line">            <span class="keyword">if</span> (T != <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                T.Teach();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//I teach programming.</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Animal</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Eat</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Eating...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Human</span> : <span class="title">Animal</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Think</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Who I am ?&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Teacher</span> : <span class="title">Human</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Teach</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I teach programming.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//类型转换：1.隐式类型转换(可以直接进行转换，没有额外操作)</span></span><br><span class="line"><span class="comment">//            a.不丢失精度的转换</span></span><br><span class="line"><span class="comment">//            b.子类向父类的转换(1.当用引用变量访问所引用的实例的成员时，只能访问到变量的类型具有的成员。</span></span><br><span class="line"><span class="comment">//                            2.父类不能用子类的成员)</span></span><br><span class="line"><span class="comment">//            c.装箱</span></span><br><span class="line"><span class="comment">//          2.显示类型转换(需要进行额外的操作)</span></span><br><span class="line"><span class="comment">//            a.有可能丢失精度(甚至发生错误)的转换，即cast</span></span><br><span class="line"><span class="comment">//            b.拆箱</span></span><br><span class="line"><span class="comment">//            c.使用Convert类</span></span><br><span class="line"><span class="comment">//            d.ToString方法与各数据类型的Parse/TryParse方法</span></span><br><span class="line"><span class="comment">//          3.自定义类型转换操作符</span></span><br><span class="line"><span class="comment">//            a.示例</span></span><br></pre></td></tr></table></figure>

<p>注：子类是父类，父类也是子类。但是引用变量只能被赋予其子类或是同类，不能被赋予父类。</p>
<h3 id="4-6-操作符-4"><a href="#4-6-操作符-4" class="headerlink" title="4.6 操作符(4)"></a>4.6 操作符(4)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Operator4</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> x = <span class="number">3</span>;</span><br><span class="line">            <span class="built_in">int</span> y = <span class="number">4</span>;</span><br><span class="line">            <span class="built_in">int</span> a = <span class="number">3</span>;</span><br><span class="line">            <span class="keyword">if</span> (x &gt; y &amp;&amp; a++ &gt; <span class="number">3</span>)<span class="comment">//表达式x &gt; y已经是false了，不计算 a++ &gt; 3表达式</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Hello!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            Console.WriteLine(a);</span><br><span class="line">            <span class="comment">//3</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            <span class="built_in">int</span>? z = <span class="literal">null</span>;<span class="comment">//int?关键字是可空类型关键字，用来声明可空类型变量</span></span><br><span class="line">            <span class="built_in">int</span> b = z ?? <span class="number">1</span>;<span class="comment">//判断z是否为null值，如果是，就把1交给b；如果不是，就把z的值赋给b</span></span><br><span class="line">            Console.WriteLine(z);</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            Console.WriteLine(b);</span><br><span class="line">            <span class="comment">//1</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            z = <span class="number">100</span>;</span><br><span class="line">            <span class="built_in">int</span> c = z ?? <span class="number">1</span>;<span class="comment">//判断z是否为null值，如果不是，就把z的值赋给c</span></span><br><span class="line">            Console.WriteLine(c);</span><br><span class="line">            <span class="comment">//100</span></span><br><span class="line">            Console.WriteLine(z);</span><br><span class="line">            <span class="comment">//100</span></span><br><span class="line">            Console.WriteLine(z.Value);</span><br><span class="line">            <span class="comment">//100</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            <span class="built_in">int</span> num = <span class="number">80</span>;</span><br><span class="line">            <span class="built_in">string</span> str = (num &gt;= <span class="number">60</span>) ? <span class="string">&quot;Pass&quot;</span> : <span class="string">&quot;Failed&quot;</span>;<span class="comment">//num &gt;= 60为真返回：左边的Pass；num &gt;= 60为假返回：右边                                                          //的Failed。</span></span><br><span class="line">            Console.WriteLine(str);</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            <span class="built_in">int</span> X = <span class="number">5</span>;</span><br><span class="line">            <span class="built_in">int</span> Y = <span class="number">6</span>;</span><br><span class="line">            <span class="built_in">int</span> Z = <span class="number">7</span>;</span><br><span class="line">            <span class="built_in">int</span> NUM = X += Y *= Z;<span class="comment">//先算Y=Y*Z==42,再算X=X+42==47</span></span><br><span class="line">            Console.WriteLine(NUM);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//逻辑“与(&amp;)”、“或(|)”、“异或(^)”操作的是二进制的值。</span></span><br><span class="line"><span class="comment">//条件“与(&amp;&amp;)”、“或(||)”操作的是bool类型的值。</span></span><br><span class="line"><span class="comment">//??  ：null值合并操作符</span></span><br><span class="line"><span class="comment">//带有赋值功能的操作符的运算顺序是由右向左；不带赋值功能的操作符运算顺序是从左向右。</span></span><br></pre></td></tr></table></figure>

<p>注：??操作符：<code>a=b??c</code>如果b是null，就把c赋给a；如果b不是null，就把b赋给a。</p>
<h2 id="五、表达式、语句详解"><a href="#五、表达式、语句详解" class="headerlink" title="五、表达式、语句详解"></a>五、表达式、语句详解</h2><h3 id="5-1-switch语句"><a href="#5-1-switch语句" class="headerlink" title="5.1 switch语句"></a>5.1 switch语句</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Switch_Statement</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">//需求：80-100 -&gt;A; 60-79 -&gt;B; 40-59 -&gt;C; 0-39 -&gt;D; 其它-&gt;Error!</span></span><br><span class="line">            <span class="built_in">int</span> score = <span class="number">95</span>;</span><br><span class="line">            <span class="keyword">switch</span> (score/<span class="number">10</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">                    <span class="keyword">if</span> (score==<span class="number">100</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">goto</span> <span class="keyword">case</span> <span class="number">8</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">goto</span> <span class="literal">default</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;D&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="literal">default</span>:</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;Error!&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//switch语句：传入一个值，看这个值满足下面哪个情况就运行什么程序。</span></span><br><span class="line"><span class="comment">//switch()语句中的表达式必须是:sbyte,byte,short,ushort,int,uint,long,ulong,bool,char,string,emun-type</span></span><br><span class="line"><span class="comment">//                             或是以上类型的null类型</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//当输入的变量等于case中的常量时，case 后跟的语句将被执行，直到遇到 break 语句为止。</span></span><br><span class="line"><span class="comment">//当遇到 break 语句时，switch 终止，控制流将跳转到 switch 语句后的下一行。</span></span><br><span class="line"><span class="comment">//不是每一个 case 都需要包含 break。如果 case 语句为空，则可以不包含 break，控制流将会继续后续的 case，直到遇到 break 为   //止。</span></span><br><span class="line"><span class="comment">//C# 不允许从一个开关部分继续执行到下一个开关部分。如果 case 语句中有处理语句，则必须包含 break 或其他跳转语句</span></span><br></pre></td></tr></table></figure>



<h3 id="5-2-try语句"><a href="#5-2-try语句" class="headerlink" title="5.2 try语句"></a>5.2 try语句</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Try_Statement</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123; </span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Calculator c = <span class="keyword">new</span> Calculator();</span><br><span class="line">            <span class="built_in">int</span> r = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">               r = c.Add(<span class="string">&quot;adc&quot;</span>, <span class="string">&quot;200&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            catch(FormatException oe)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(oe.Message);</span><br><span class="line">            &#125;</span><br><span class="line">            Console.WriteLine(r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Calculator</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params"><span class="built_in">string</span> arg1,<span class="built_in">string</span> arg2</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> a = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">int</span> b = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">bool</span> hasError = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                a = <span class="built_in">int</span>.Parse(arg1);</span><br><span class="line">                b = <span class="built_in">int</span>.Parse(arg2);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            catch (ArgumentNullException ane)<span class="comment">//ane变量引用着ArgumentNullException类型的实例</span></span><br><span class="line">                                             <span class="comment">//可以直接把包含在异常里的消息显示给客户</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(ane.Message);</span><br><span class="line">                hasError = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            catch (FormatException oe)</span><br><span class="line">            &#123;</span><br><span class="line">                hasError = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">throw</span> oe;<span class="comment">//把需要处理的异常抛给调用它的函数去处理。</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            catch (OverflowException)<span class="comment">//数据溢出的异常</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Out of range!&quot;</span>);</span><br><span class="line">                hasError = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">finally</span><span class="comment">//一般内容为：(1)释放系统资源 (2)程序的执行记录(logo)</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (hasError)</span><br><span class="line">                &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;Execution has error!&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;Done!&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">int</span> result = a + b;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//try语句：try语句提供一种机制，用于捕捉在块的执行期间发生的各种异常。此外，try语句还能让我们指定一个代码</span></span><br><span class="line"><span class="comment">//         块，并保证当控制离开try语句时，总是先执行该代码。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//finally语句不管发不发生异常都会执行。</span></span><br></pre></td></tr></table></figure>

<p>Parse方法的作用如下：</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/Parse.png" alt="Parse"></p>
<p>它会产生三种异常：ArgumentNullException、FormatException和OverflowException。这三种异常分别为：</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/3%E7%A7%8D%E5%BC%82%E5%B8%B8.png" alt="3种异常"></p>
<p>try、catch语句起到了一个防护作用，在可能会发生异常的时候让程序可以抓住并且输出异常，以免程序崩溃。</p>
<h3 id="5-3-do语句"><a href="#5-3-do语句" class="headerlink" title="5.3 do语句"></a>5.3 do语句</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/do%E8%AF%AD%E5%8F%A5.png" alt="do语句"></p>
<h3 id="5-4-continue、break语句"><a href="#5-4-continue、break语句" class="headerlink" title="5.4 continue、break语句"></a>5.4 continue、break语句</h3><p>continue语句：放弃当前循环，立刻开始一次新的循环。</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/continue%E8%AF%AD%E5%8F%A5.png" alt="continue语句"></p>
<p>break语句：直接退出此循环。</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/break%E8%AF%AD%E5%8F%A5.png" alt="break语句"></p>
<p>try、do、continue与break语句的整合实例：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">iteration_statement</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)<span class="comment">//游戏规则：输入两个数，求和为100</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> score = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">int</span> sum = <span class="number">100</span>;</span><br><span class="line">            <span class="keyword">do</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Please input first number:&quot;</span>);</span><br><span class="line">                <span class="built_in">string</span> str1 = Console.ReadLine();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (str1.ToLower()==<span class="string">&quot;end&quot;</span>)<span class="comment">//允许用户提前结束游戏</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="built_in">int</span> x = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    x = <span class="built_in">int</span>.Parse(str1);</span><br><span class="line">                &#125;</span><br><span class="line">                catch <span class="comment">//try与continue语句的结合保证了输入错误后能重新输入</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;First number has promblem! Restart.&quot;</span>);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Please input second number&quot;</span>);</span><br><span class="line">                <span class="built_in">string</span> str2 = Console.ReadLine();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (str2.ToLower() == <span class="string">&quot;end&quot;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="built_in">int</span> y = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    y = <span class="built_in">int</span>.Parse(str2);</span><br><span class="line">                &#125;</span><br><span class="line">                catch</span><br><span class="line">                &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;Second number has promblem! Restart.&quot;</span>);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                sum = x + y;</span><br><span class="line">                <span class="keyword">if</span> (sum == <span class="number">100</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    score++;</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;Coeerct!&#123;0&#125;+&#123;1&#125;=&#123;2&#125;&quot;</span>, x, y, sum);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;Error!&#123;0&#125;+&#123;1&#125;=&#123;2&#125;&quot;</span>, x, y, sum);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">while</span> (sum==<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Your score is &#123;0&#125;.&quot;</span>,score);</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;GMME OVER!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//continue语句：结束此次循环开启下新的循环。</span></span><br><span class="line"><span class="comment">//break语句：结束整个循环体。</span></span><br></pre></td></tr></table></figure>



<h3 id="5-5-迭代语句"><a href="#5-5-迭代语句" class="headerlink" title="5.5 迭代语句"></a>5.5 迭代语句</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">iteration_statement2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span>[] intArray = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;判断数组是否为Array类&quot;</span>);</span><br><span class="line">            Console.WriteLine(intArray <span class="keyword">is</span> Array);<span class="comment">//所有的数组类型的基类都是Array这个类。</span></span><br><span class="line">            Console.WriteLine();</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;=======================&quot;</span>);</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;开始遍历数组&quot;</span>);</span><br><span class="line">            IEnumerator enumeratoe = intArray.GetEnumerator();<span class="comment">//让enumeratoe这个迭代器指向intArray[]这个数组。</span></span><br><span class="line">            <span class="keyword">while</span> (enumeratoe.MoveNext())</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(enumeratoe.Current);</span><br><span class="line">            &#125;Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            enumeratoe.Reset();<span class="comment">//将枚举数设置为其初始位置，该位置位于集合中第一个元素之前</span></span><br><span class="line">            <span class="keyword">while</span> (enumeratoe.MoveNext())</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(enumeratoe.Current);</span><br><span class="line">            &#125;</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;开始遍历泛型&quot;</span>);</span><br><span class="line">            List&lt;<span class="built_in">int</span>&gt; intList = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt;() &#123; <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span> &#125;;</span><br><span class="line">            IEnumerator enumeratoe2 = intList.GetEnumerator();</span><br><span class="line">            <span class="keyword">while</span> (enumeratoe2.MoveNext())</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(enumeratoe2.Current);</span><br><span class="line">            &#125;</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            enumeratoe2.Reset();</span><br><span class="line">            <span class="keyword">while</span> (enumeratoe2.MoveNext())</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(enumeratoe2.Current);</span><br><span class="line">            &#125;</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;用foreach语句迭代集合&quot;</span>);</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> current <span class="keyword">in</span> intList)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(current);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//IEnumerator(迭代器)：可以用来遍历数组中的元素，相当于C++中的指针。</span></span><br><span class="line"><span class="comment">//IEnumerator中有MoveNext()，Current，Reset()这三个成员。</span></span><br><span class="line"><span class="comment">//C#中所有实现了IEnumerable接口的类都是可以被遍历的集合。</span></span><br><span class="line"><span class="comment">//foreach语句最佳应用场合：对集合进行遍历。</span></span><br></pre></td></tr></table></figure>

<p> 让迭代器指向需要遍历集合的语句：IEnumerator enumeratoe2 = intList.GetEnumerator();</p>
<p>MoveNext()方法：返回值是bool类型，作用是将枚举数推进到集合的下一个元素。如果已成功推进到下一个元素没结果为true；如果枚举数传递到集合的末尾，则为false。</p>
<h2 id="六、字段、属性、索引器和常量"><a href="#六、字段、属性、索引器和常量" class="headerlink" title="六、字段、属性、索引器和常量"></a>六、字段、属性、索引器和常量</h2><h3 id="6-1-字段"><a href="#6-1-字段" class="headerlink" title="6.1 字段"></a>6.1 字段</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522094935.png" alt="字段"></p>
<h3 id="6-2-属性"><a href="#6-2-属性" class="headerlink" title="6.2 属性"></a>6.2 属性</h3><h4 id="6-2-1-属性的基本知识"><a href="#6-2-1-属性的基本知识" class="headerlink" title="6.2.1 属性的基本知识"></a>6.2.1 属性的基本知识</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Property</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                Student stu1 = <span class="keyword">new</span> Student();</span><br><span class="line">                stu1.Age = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">                Student stu2 = <span class="keyword">new</span> Student();</span><br><span class="line">                stu2.Age = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">                Student stu3 = <span class="keyword">new</span> Student();</span><br><span class="line">                stu3.Age = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">                <span class="built_in">int</span> avgAge = (stu1.Age + stu2.Age + stu3.Age) / <span class="number">3</span>;</span><br><span class="line">                Console.WriteLine(avgAge);</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;================&quot;</span>);</span><br><span class="line">                Console.WriteLine();</span><br><span class="line"></span><br><span class="line">                </span><br><span class="line">                Student.Amount = <span class="number">100</span>;</span><br><span class="line">                Console.WriteLine(Student.Amount);</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;================&quot;</span>);</span><br><span class="line">                Console.WriteLine();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">                stu.Score = <span class="number">1000</span>;</span><br><span class="line">                Console.WriteLine(stu.Score);</span><br><span class="line">            &#125;</span><br><span class="line">            catch (Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(ex.Message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> age;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Age  <span class="comment">//Age属性就是age字段的包装器</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="keyword">this</span>.age;&#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">set</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">value</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="keyword">value</span> &lt;= <span class="number">120</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">this</span>.age = <span class="keyword">value</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;Age value has error.&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> amount;<span class="comment">//属性的完整声明</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> Amount</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> amount; &#125;</span><br><span class="line">            <span class="keyword">set</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">value</span>&gt;=<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    Student.amount = <span class="keyword">value</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;Amount must greater than 0.&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Score &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;<span class="comment">//属性的简易声明</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> myVar;<span class="comment">//只读属性</span></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> MyProperty</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> myVar; &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> myVar2;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> MyProperty2</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> myVar2; &#125;</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">set</span> &#123; myVar2 = <span class="keyword">value</span>; &#125;<span class="comment">//只允许在类的内部赋值的属性,set在外部不能访问</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SomeMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.myVar2 = <span class="number">20</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//快速声明属性方式：propfull加两下Tab。</span></span><br><span class="line"><span class="comment">//set中的value为微软准备的默认变量，在set中value为关键字。value代表着由用户传进来的设置的值。</span></span><br><span class="line"><span class="comment">//属性也是一种“语法糖”：当调用set时，编译器自动调用set_Age()方法；</span></span><br><span class="line"><span class="comment">//                        当调用get时，编译器自动调用get_Age()方法。</span></span><br><span class="line"><span class="comment">//建议：永远使用属性(而不是字段)来暴露数据，即字段永远都是private或protected的。</span></span><br></pre></td></tr></table></figure>

<h4 id="6-2-2-返回值动态变化的属性"><a href="#6-2-2-返回值动态变化的属性" class="headerlink" title="6.2.2 返回值动态变化的属性"></a>6.2.2 返回值动态变化的属性</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Property2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">                stu.Age = <span class="number">16</span>;</span><br><span class="line">                Console.WriteLine(stu.CanWork);</span><br><span class="line">            &#125;</span><br><span class="line">            catch (Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(ex.Message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Age  </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> age; &#125;</span><br><span class="line">            <span class="keyword">set</span> &#123; age = <span class="keyword">value</span>; &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">bool</span> CanWork   <span class="comment">//返回值是动态变化的属性</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.age &gt;= <span class="number">16</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-3-索引器"><a href="#6-3-索引器" class="headerlink" title="6.3 索引器"></a>6.3 索引器</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Indexer</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">            stu[<span class="string">&quot;Math&quot;</span>] = <span class="number">90</span>;</span><br><span class="line">            stu[<span class="string">&quot;Math&quot;</span>] = <span class="number">100</span>;</span><br><span class="line">            <span class="keyword">var</span> mathScore = stu[<span class="string">&quot;Math&quot;</span>];</span><br><span class="line">            Console.WriteLine(mathScore);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">Dictionary</span>&lt;<span class="title">string</span>, <span class="title">int</span>&gt; scoreDictionary</span> = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">int</span>&gt;();</span><br><span class="line">        <span class="comment">//字典类型的字段</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span>? <span class="keyword">this</span>[<span class="built_in">string</span> subject]  <span class="comment">//此索引器的返回值类型为int?类型,int?为可空的整数类型</span></span><br><span class="line">                                          <span class="comment">//索引的类型为string</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.scoreDictionary.ContainsKey(subject))  <span class="comment">//scoreDictionary.ContainsKey(x)方法表示查看次                                                                 //字典中是否有键x</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">this</span>.scoreDictionary[subject];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">set</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">value</span>.HasValue==<span class="literal">false</span>)  <span class="comment">//如果传进来的是null值</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;Score cannot be null.&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.scoreDictionary.ContainsKey(subject))  <span class="comment">//如果字典中有此键，就把值赋给它。</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">this</span>.scoreDictionary[subject] = <span class="keyword">value</span>.Value;  <span class="comment">//字典的数据类型为int，而索引器的数据类型为可空                                                                     //型；不可以把空值赋给int型变量，所以当值为空时                                                                     //value.Value才是真正的值。</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>  <span class="comment">//否则增加一个键并把值付给它。</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">this</span>.scoreDictionary.Add(subject, <span class="keyword">value</span>.Value);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//快速声明索引器：indexer加两下Tab。</span></span><br><span class="line"><span class="comment">//索引器：它使对象能够与数组相同的方式(即使用下标)进行索引。</span></span><br><span class="line"><span class="comment">//索引器注意：一般使用在集合类型中</span></span><br></pre></td></tr></table></figure>



<h3 id="6-4-常量"><a href="#6-4-常量" class="headerlink" title="6.4 常量"></a>6.4 常量</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522103141.png" alt="常量"></p>
<h2 id="七、参数及扩展方法"><a href="#七、参数及扩展方法" class="headerlink" title="七、参数及扩展方法"></a>七、参数及扩展方法</h2><h3 id="7-1-传值参数"><a href="#7-1-传值参数" class="headerlink" title="7.1 传值参数"></a>7.1 传值参数</h3><h4 id="7-1-1-传递值类型"><a href="#7-1-1-传递值类型" class="headerlink" title="7.1.1 传递值类型"></a>7.1.1 传递值类型</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Value_Parameter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">            <span class="built_in">int</span> y = <span class="number">100</span>;</span><br><span class="line">            stu.AddOne(y);</span><br><span class="line">            <span class="comment">//101</span></span><br><span class="line">            Console.WriteLine(y);</span><br><span class="line">            <span class="comment">//100</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AddOne</span>(<span class="params"><span class="built_in">int</span> x</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            x = x + <span class="number">1</span>;</span><br><span class="line">            Console.WriteLine(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//传值参数不改变传入变量本身的值</span></span><br></pre></td></tr></table></figure>

<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522104924.png" alt="传值参数-值类型"></p>
<h4 id="7-1-2-传递引用类型"><a href="#7-1-2-传递引用类型" class="headerlink" title="7.1.2 传递引用类型"></a>7.1.2 传递引用类型</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Value_Parameter2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu = <span class="keyword">new</span> Student()&#123; Name=<span class="string">&quot;Tim&quot;</span>&#125;;</span><br><span class="line">            SomeMethod(stu);</span><br><span class="line">            Console.WriteLine(stu.Name);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SomeMethod</span>(<span class="params">Student stu</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            stu = <span class="keyword">new</span> Student() &#123; Name = <span class="string">&quot;Tom&quot;</span> &#125;;  <span class="comment">//在此方法中创建了一个新对象</span></span><br><span class="line">            Console.WriteLine(stu.Name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建新对象，不改变原对象：</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522105907.png" alt="传值参数-引用类型，创建新的对象"></p>
<p>不创建新对象，改变原对象：</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522105938.png" alt="传值参数-引用类型，不创建新对象"></p>
<h3 id="7-2-引用参数"><a href="#7-2-引用参数" class="headerlink" title="7.2 引用参数"></a>7.2 引用参数</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522110146.png" alt="引用参数"></p>
<h4 id="7-2-1-传递值类型"><a href="#7-2-1-传递值类型" class="headerlink" title="7.2.1 传递值类型"></a>7.2.1 传递值类型</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Reference_Parameter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> y = <span class="number">1</span>;</span><br><span class="line">            IWantSideEffect(<span class="keyword">ref</span> y);<span class="comment">//这个变量y</span></span><br><span class="line">            Console.WriteLine(y);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">IWantSideEffect</span>(<span class="params"><span class="keyword">ref</span> <span class="built_in">int</span> x</span>)<span class="comment">//和这个参数x指向同一个内存地址。</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            x = x + <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ref参数：能够将一个变量带入一个方法中进行改变，改变完成后，再将改变后的值带出方法。注：在方法的外部必须有赋值。</span></span><br><span class="line"><span class="comment">//引用形参x不创建新的存储位置，而是引用y和y共用一个地址。所以改变x也就会改变y的值。</span></span><br></pre></td></tr></table></figure>

<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522110306.png" alt="引用参数-值类型"></p>
<h4 id="7-2-2-传递引用类型"><a href="#7-2-2-传递引用类型" class="headerlink" title="7.2.2 传递引用类型"></a>7.2.2 传递引用类型</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Reference_Paramete2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student outterStu = <span class="keyword">new</span> Student() &#123; Name = <span class="string">&quot;Tim&quot;</span> &#125;;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;HashCode=&#123;0&#125;,Name=&#123;1&#125;&quot;</span>,outterStu.GetHashCode(),outterStu.Name);</span><br><span class="line">            <span class="comment">//HashCode=46104728,Name=Tim</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;=====================&quot;</span>);</span><br><span class="line">            IWantSideEffect(<span class="keyword">ref</span> outterStu);<span class="comment">//这个变量</span></span><br><span class="line">            <span class="comment">//HashCode=12289376,Name=Tom</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;HashCode=&#123;0&#125;,Name=&#123;1&#125;&quot;</span>, outterStu.GetHashCode(), outterStu.Name);</span><br><span class="line">            <span class="comment">//HashCode=12289376,Name=Tom</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">IWantSideEffect</span>(<span class="params"><span class="keyword">ref</span> Student stu</span>)  <span class="comment">//与这个引用参数指向同一个地址，此地址内存储的是实例对象的地址</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            stu = <span class="keyword">new</span> Student() &#123; Name = <span class="string">&quot;Tom&quot;</span> &#125;;  <span class="comment">//虽然形参在函数中创造了一个新的对象，但是新的对象还是引用着实参的对象</span></span><br><span class="line">                                                   <span class="comment">//所以当stu被改变时，原对象outterStu也被改变了</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;HashCode=&#123;0&#125;,Name=&#123;1&#125;&quot;</span>,stu.GetHashCode(),stu.Name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//引用参数与变量指向的是一个地址，此地址内存储的是实例对象的地址。传完后引用参数也指向这个对象。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//注：1.传值函数在内存中创建了实际参数的副本，就是说参数与变量分别占用了两个不同的内存地址。但</span></span><br><span class="line"><span class="comment">//      是，这两个不一样的地址中却存储着相同的值(变量的值)。</span></span><br><span class="line"><span class="comment">//    2.引用函数参数与变量指向同一个内存地址。</span></span><br></pre></td></tr></table></figure>

<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522110514.png" alt="引用参数-引用类型"></p>
<h3 id="7-3-输出参数"><a href="#7-3-输出参数" class="headerlink" title="7.3 输出参数"></a>7.3 输出参数</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522113016.png" alt="输出形参"></p>
<h4 id="7-3-1-值类型输出参数"><a href="#7-3-1-值类型输出参数" class="headerlink" title="7.3.1 值类型输出参数"></a>7.3.1 值类型输出参数</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Out_Parameter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">double</span> x = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">bool</span> b = DoubleParser.TryParse(<span class="string">&quot;789&quot;</span>, <span class="keyword">out</span> x);</span><br><span class="line">            <span class="keyword">if</span> (b == <span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(x+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">DoubleParser</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">TryParse</span>(<span class="params"><span class="built_in">string</span> input,<span class="keyword">out</span> <span class="built_in">double</span> result</span>)<span class="comment">//此处定义的TryParse方法为把传入的字符串转化成数                                                                    //值，并且把结果保存result中，再通过out把值带给                                                                    //x</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                result = <span class="built_in">double</span>.Parse(input);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            catch</span><br><span class="line">            &#123;</span><br><span class="line">                result = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//out参数：在一个方法中返回不同类型的值。注：out参数必须在方法内中有赋值。</span></span><br></pre></td></tr></table></figure>

<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522171923.png" alt="值类型输出参数"></p>
<h4 id="7-3-2-引用类型输出参数"><a href="#7-3-2-引用类型输出参数" class="headerlink" title="7.3.2 引用类型输出参数"></a>7.3.2 引用类型输出参数</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Out_Parameter2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu = <span class="literal">null</span>;</span><br><span class="line">            <span class="built_in">bool</span> b = StudentFactory.Create(<span class="string">&quot;Tim&quot;</span>, <span class="number">34</span>, <span class="keyword">out</span> stu);</span><br><span class="line">            <span class="keyword">if</span> (b==<span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Student &#123;0&#125;,age is &#123;1&#125;.&quot;</span>,stu.Name,stu.Age);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">StudentFactory</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">Create</span>(<span class="params"><span class="built_in">string</span> stuName,<span class="built_in">int</span> stuAge,<span class="keyword">out</span> Student result</span>) <span class="comment">//引用类型的输出参数</span></span></span><br><span class="line"><span class="function">                                                                                <span class="comment">//Create为StudentFactory类                                                                                   //的静态方法</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            result = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">string</span>.IsNullOrEmpty(stuName))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (stuAge&lt;<span class="number">20</span>||stuAge&gt;<span class="number">80</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            result = <span class="keyword">new</span> Student() &#123; Name = stuName, Age = stuAge &#125;;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//此处在方法体Create里实例化了Student的对象并且拿result引用了此对象，再把result的值out给stu这个引用变量。</span></span><br></pre></td></tr></table></figure>

<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522172815.png" alt="QQ截图20210522172729"></p>
<h4 id="7-3-3-数组类型输出参数"><a href="#7-3-3-数组类型输出参数" class="headerlink" title="7.3.3 数组类型输出参数"></a>7.3.3 数组类型输出参数</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Array_Paramete</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> result = CalculateSum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);<span class="comment">//有了params关键字后就不用再声明数组了，可以直接传数组元素。</span></span><br><span class="line">            Console.WriteLine(result);</span><br><span class="line">            <span class="comment">//6</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;================&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            <span class="built_in">string</span> str = <span class="string">&quot;Tim;Tom,Amy.Lisa&quot;</span>;</span><br><span class="line">            <span class="built_in">string</span>[] result2 = str.Split(<span class="string">&#x27;;&#x27;</span>, <span class="string">&#x27;,&#x27;</span>, <span class="string">&#x27;.&#x27;</span>);<span class="comment">//str.Split方法的返回值为字符串数组类型，</span></span><br><span class="line">                                                        <span class="comment">//返回的每个数组元素就为分隔后的结果。</span></span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> name <span class="keyword">in</span> result2)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(name);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//Tim</span></span><br><span class="line">            <span class="comment">//Tom</span></span><br><span class="line">            <span class="comment">//Amy</span></span><br><span class="line">            <span class="comment">//Lisa</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">CalculateSum</span>(<span class="params"><span class="keyword">params</span> <span class="built_in">int</span>[] intArray</span>)<span class="comment">//数组参数</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> item <span class="keyword">in</span> intArray)</span><br><span class="line">            &#123;</span><br><span class="line">                sum += item;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//params可变参数：将实参列表中跟可变参数数组类型一致的元素都当做数组的元素去处理。</span></span><br><span class="line"><span class="comment">//注：1.params参数数组必须是形参列表中的最后一个参数。</span></span><br><span class="line"><span class="comment">//    2.一个参数列表中只能出现一个params可变参数。（params可作用于任意长度数组）</span></span><br></pre></td></tr></table></figure>

<h4 id="7-3-4-具名类型输出参数"><a href="#7-3-4-具名类型输出参数" class="headerlink" title="7.3.4 具名类型输出参数"></a>7.3.4 具名类型输出参数</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">HaveName_Paramete</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            PrintInfo(age: <span class="number">34</span>,name: <span class="string">&quot;Tim&quot;</span>);<span class="comment">//具名调用</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PrintInfo</span>(<span class="params"><span class="built_in">string</span> name,<span class="built_in">int</span> age</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Hello &#123;0&#125;, you are &#123;1&#125;.&quot;</span>,name,age);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具名调用优点：1.增加代码可读性。</span></span><br><span class="line"><span class="comment">//            2.当为参数加上名字后，实参的顺序就不再受形参列表的位置顺序的约束了。</span></span><br></pre></td></tr></table></figure>



<h3 id="7-4-扩展方法"><a href="#7-4-扩展方法" class="headerlink" title="7.4 扩展方法"></a>7.4 扩展方法</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">This_Paramete</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">double</span> x = <span class="number">3.1415926</span>;</span><br><span class="line">            <span class="built_in">double</span> y = x.Round(<span class="number">4</span>);</span><br><span class="line">            Console.WriteLine(y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">DoubleExtension</span> <span class="comment">//此类目的是为double扩展方法</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">double</span> <span class="title">Round</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">double</span> input, <span class="built_in">int</span> digits</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">double</span> result = Math.Round(input, digits);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用扩展方法注意：1.方法必须是公有的、静态的，即被public static所修饰；</span></span><br><span class="line"><span class="comment">//                  2.必须是形参列表中的第一个，由this修饰；</span></span><br><span class="line"><span class="comment">//                  3.必须由一个静态类(一般类名为SomeTypeExtension)来统一收纳对SomeType类型的扩展方法。</span></span><br></pre></td></tr></table></figure>

<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522174824.png" alt="QQ截图20210522174753"></p>
<h3 id="7-5-参数总结"><a href="#7-5-参数总结" class="headerlink" title="7.5 参数总结"></a>7.5 参数总结</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210522174928.png" alt="参数总结"></p>
<h2 id="八、委托"><a href="#八、委托" class="headerlink" title="八、委托"></a>八、委托</h2><h3 id="8-1-初识委托-两种常见委托"><a href="#8-1-初识委托-两种常见委托" class="headerlink" title="8.1 初识委托(两种常见委托)"></a>8.1 初识委托(两种常见委托)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Delegate1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Calculator calculator = <span class="keyword">new</span> Calculator();</span><br><span class="line">            Action action = <span class="keyword">new</span> Action(calculator.Report);<span class="comment">//声明一个引用变量action来引用新建的委托对象。</span></span><br><span class="line">            <span class="comment">//对于没有返回值的方法使用Action委托。</span></span><br><span class="line">            calculator.Report();</span><br><span class="line">            action.Invoke();</span><br><span class="line">            action();<span class="comment">//简化版</span></span><br><span class="line"></span><br><span class="line">            Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>&gt; func1 = <span class="keyword">new</span> Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>&gt;(calculator.Add);<span class="comment">//声明一个引用变量func1来引用新建的委托对象。</span></span><br><span class="line">            Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>&gt; func2 = <span class="keyword">new</span> Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>&gt;(calculator.Sub);</span><br><span class="line">            <span class="comment">//使用Func委托时&lt;&gt;中的数据类型是方法的参数类型与返回值类型。</span></span><br><span class="line">            <span class="built_in">int</span> x = <span class="number">100</span>;</span><br><span class="line">            <span class="built_in">int</span> y = <span class="number">200</span>;</span><br><span class="line">            <span class="built_in">int</span> z = <span class="number">0</span>;</span><br><span class="line">            z = func1.Invoke(x, y);</span><br><span class="line">            Console.WriteLine(z);</span><br><span class="line">            <span class="comment">//300</span></span><br><span class="line">            z = func2(x, y);<span class="comment">//简化版</span></span><br><span class="line">            Console.WriteLine(z);</span><br><span class="line">            <span class="comment">//-100</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Calculator</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Report</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I have 3 methods.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params"><span class="built_in">int</span> a,<span class="built_in">int</span> b</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> result = a + b;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Sub</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> result = a - b;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="8-2-委托的声明与使用"><a href="#8-2-委托的声明与使用" class="headerlink" title="8.2 委托的声明与使用"></a>8.2 委托的声明与使用</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Delegate2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="built_in">double</span> <span class="title">Calc</span>(<span class="params"><span class="built_in">double</span> x, <span class="built_in">double</span> y</span>)</span>;<span class="comment">//声明一个委托：类型为Calc；返回值类型为double；</span></span><br><span class="line">                                                    <span class="comment">//传入的参数为两个double类型。</span></span><br><span class="line">                                                    <span class="comment">//注：委托与类同级别，应声明在名称空间中。</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Calculator calculator = <span class="keyword">new</span> Calculator();</span><br><span class="line">            Calc calc1 = <span class="keyword">new</span> Calc(calculator.Add); <span class="comment">//创建一个委托变量calc1引用委托实例。</span></span><br><span class="line">            Calc calc2 = <span class="keyword">new</span> Calc(calculator.Sub); <span class="comment">//创建实例时给的 方法必须是返回值为double类型，参数列表为两个double变量</span></span><br><span class="line">            Calc calc3 = <span class="keyword">new</span> Calc(calculator.Mul); </span><br><span class="line">            Calc calc4 = <span class="keyword">new</span> Calc(calculator.Div);</span><br><span class="line"></span><br><span class="line">            <span class="built_in">double</span> a = <span class="number">100</span>;</span><br><span class="line">            <span class="built_in">double</span> b = <span class="number">200</span>;</span><br><span class="line">            <span class="built_in">double</span> c = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            c = calc1.Invoke(a, b);</span><br><span class="line">            Console.WriteLine(c);</span><br><span class="line">            c = calc2.Invoke(a, b);</span><br><span class="line">            Console.WriteLine(c);</span><br><span class="line">            c = calc3.Invoke(a, b);</span><br><span class="line">            Console.WriteLine(c);</span><br><span class="line">            c = calc4(a, b);<span class="comment">//简化版</span></span><br><span class="line">            Console.WriteLine(c);</span><br><span class="line">            <span class="comment">//通过委托间接调用这四个函数。</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Calculator</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">double</span> <span class="title">Add</span>(<span class="params"><span class="built_in">double</span> x,<span class="built_in">double</span> y</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">return</span> x + y;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">double</span> <span class="title">Sub</span>(<span class="params"><span class="built_in">double</span> x, <span class="built_in">double</span> y</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">return</span> x - y;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">double</span> <span class="title">Mul</span>(<span class="params"><span class="built_in">double</span> x, <span class="built_in">double</span> y</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">return</span> x * y;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">double</span> <span class="title">Div</span>(<span class="params"><span class="built_in">double</span> x, <span class="built_in">double</span> y</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">return</span> x / y;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//委托与所封装的方法必需“类型兼容”（委托与所封装方法的返回值类型与参数列表类型必需一致）。</span></span><br></pre></td></tr></table></figure>

<p>注：实例化委托时()中写的是类的方法：Calc calc1 = new Calc(calculator.Add);。</p>
<p>​        调用委托方法时()中写的是同类型的参数：c = calc1(a, b);</p>
<h3 id="8-3-委托的两种常见使用"><a href="#8-3-委托的两种常见使用" class="headerlink" title="8.3 委托的两种常见使用"></a>8.3 委托的两种常见使用</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210524202707.png" alt="委托的一般使用"></p>
<h4 id="8-3-1-模板方法"><a href="#8-3-1-模板方法" class="headerlink" title="8.3.1 模板方法"></a>8.3.1 模板方法</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Delegate3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            ProductFactory productFactory = <span class="keyword">new</span> ProductFactory();</span><br><span class="line">            WrapFactory wrapFactory = <span class="keyword">new</span> WrapFactory();</span><br><span class="line"></span><br><span class="line">            Func&lt;Product&gt; func1 = <span class="keyword">new</span> Func&lt;Product&gt;(productFactory.MakePizza);</span><br><span class="line">            Func&lt;Product&gt; func2 = <span class="keyword">new</span> Func&lt;Product&gt;(productFactory.MakeToyCar);<span class="comment">//把ProductFactory类中的</span></span><br><span class="line">                                                                               <span class="comment">//MakeToyCar方法封装到委</span></span><br><span class="line">                                                                               <span class="comment">//托类型的对象func2中。</span></span><br><span class="line"></span><br><span class="line">            Box box1 = wrapFactory.WrapProduct(func1);<span class="comment">//创建一个引用变量box1来引用对象。在WrapProduct方法中实例化对象box。</span></span><br><span class="line">            Box box2 = wrapFactory.WrapProduct(func2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            Console.WriteLine(box1.Product1.Name);</span><br><span class="line">            Console.WriteLine(box2.Product1.Name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Box</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> Product Product1 &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;  <span class="comment">//从box.Product1 = product;可以看出Product1是一个引用变量类型的属性</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">WrapFactory</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Box <span class="title">WrapProduct</span>(<span class="params">Func&lt;Product&gt; getProduct</span>)<span class="comment">//模板方法</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Box box = <span class="keyword">new</span> Box();</span><br><span class="line">            Product product = getProduct.Invoke();<span class="comment">//创建一个引用变量product来引用对象。</span></span><br><span class="line">                                                  <span class="comment">//此处的getProduct.Invoke()方法先是实例化对象，再设置product.Name的值，</span></span><br><span class="line">                                                  <span class="comment">//之后返回product这个引用给此式的product。</span></span><br><span class="line">            box.Product1 = product;</span><br><span class="line">            <span class="keyword">return</span> box;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">ProductFactory</span>  <span class="comment">//把此类中的方法封装到委托类型的对象中</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Product <span class="title">MakePizza</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Product product = <span class="keyword">new</span> Product();</span><br><span class="line">            product.Name = <span class="string">&quot;Pizza&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> product;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Product <span class="title">MakeToyCar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Product product = <span class="keyword">new</span> Product();</span><br><span class="line">            product.Name = <span class="string">&quot;Toy Car&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> product;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//日常工作中使用委托：把委托当成方法的参数传到方法中去。</span></span><br><span class="line"><span class="comment">//模板方法：假设有方法A，通过传进来的委托参数借用传进来的外部方法B来产生一个结果。</span></span><br><span class="line"><span class="comment">//         (此模板方法中有一处是不确定的，其余部分都是确定好的。不确定的部分就靠传进来的委托参数所包含的方法来填补。)</span></span><br><span class="line"><span class="comment">//          </span></span><br><span class="line"><span class="comment">//public Box WrapProduct(Func&lt;Product&gt; getProduct)&#123;&#125;是一个返回值类型为Box的方法。传入方法的参数是Func&lt;Product&gt;委托类型的参数。</span></span><br></pre></td></tr></table></figure>

<p>模板方法：假设有方法A，通过传进来的委托参数借用传进来的外部方法B来产生一个结果。</p>
<p>(此模板方法中有一处是不确定的，其余部分都是确定好的。不确定的部分就靠传进来的委托参数所包含的方法来填补。)</p>
<p>注：</p>
<p>此处的Box类可以省略，省略之后的结果如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Delegate3._1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            ProductFactory productFactory = <span class="keyword">new</span> ProductFactory();</span><br><span class="line">            WrapFactory wrapFactory = <span class="keyword">new</span> WrapFactory();</span><br><span class="line"></span><br><span class="line">            Func&lt;Product&gt; func1 = <span class="keyword">new</span> Func&lt;Product&gt;(productFactory.MakePizza);</span><br><span class="line">            Func&lt;Product&gt; func2 = <span class="keyword">new</span> Func&lt;Product&gt;(productFactory.MakeToyCar);<span class="comment">//把ProductFactory类中的</span></span><br><span class="line">                                                                               <span class="comment">//MakeToyCar方法封装到委</span></span><br><span class="line">                                                                               <span class="comment">//托类型的对象func2中。</span></span><br><span class="line"></span><br><span class="line">            Product p1 = wrapFactory.WrapProduct(func1);<span class="comment">//创建一个引用变量p1来引用对象。在WrapProduct方法中实例化对象。</span></span><br><span class="line">            Product p2 = wrapFactory.WrapProduct(func2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            Console.WriteLine(p1.Name);</span><br><span class="line">            Console.WriteLine(p2.Name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">WrapFactory</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Product <span class="title">WrapProduct</span>(<span class="params">Func&lt;Product&gt; getProduct</span>)<span class="comment">//模板方法</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Product p = <span class="keyword">new</span> Product();</span><br><span class="line">            Product product = getProduct.Invoke();<span class="comment">//创建一个引用变量product来引用对象。</span></span><br><span class="line">                                                  <span class="comment">//此处的getProduct.Invoke()方法先是实例化对象，再设置product.Name的值，</span></span><br><span class="line">                                                  <span class="comment">//之后返回product这个引用给此式的product。</span></span><br><span class="line">            p = product;</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">ProductFactory</span>  <span class="comment">//把此类中的方法封装到委托类型的对象中</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Product <span class="title">MakePizza</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Product product = <span class="keyword">new</span> Product();</span><br><span class="line">            product.Name = <span class="string">&quot;Pizza&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> product;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Product <span class="title">MakeToyCar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Product product = <span class="keyword">new</span> Product();</span><br><span class="line">            product.Name = <span class="string">&quot;Toy Car&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> product;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-3-2-回调方法"><a href="#8-3-2-回调方法" class="headerlink" title="8.3.2 回调方法"></a>8.3.2 回调方法</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Delegate3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            ProductFactory productFactory = <span class="keyword">new</span> ProductFactory();</span><br><span class="line">            WrapFactory wrapFactory = <span class="keyword">new</span> WrapFactory();</span><br><span class="line"></span><br><span class="line">            Func&lt;Product&gt; func1 = <span class="keyword">new</span> Func&lt;Product&gt;(productFactory.MakePizza);</span><br><span class="line">            Func&lt;Product&gt; func2 = <span class="keyword">new</span> Func&lt;Product&gt;(productFactory.MakeToyCar);</span><br><span class="line"></span><br><span class="line">            Logger logger = <span class="keyword">new</span> Logger();</span><br><span class="line">            Action&lt;Product&gt; log = <span class="keyword">new</span> Action&lt;Product&gt;(logger.Log);</span><br><span class="line"></span><br><span class="line">            Box box1 = wrapFactory.WrapProduct(func1,log);</span><br><span class="line">            Box box2 = wrapFactory.WrapProduct(func2,log);</span><br><span class="line">            <span class="comment">//Product &#x27;Toy Car&#x27; created at 2021/5/24 13:09:52.Price is 100.</span></span><br><span class="line"></span><br><span class="line">            Console.WriteLine(box1.Product1.Name);</span><br><span class="line">            <span class="comment">//Pizza</span></span><br><span class="line">            Console.WriteLine(box2.Product1.Name);</span><br><span class="line">            <span class="comment">//Toy Car</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Logger</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Log</span>(<span class="params">Product product</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Product &#x27;&#123;0&#125;&#x27; created at &#123;1&#125;.Price is &#123;2&#125;.&quot;</span>,product.Name,DateTime.UtcNow,</span><br><span class="line">                product.Price);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">double</span> Price &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Box</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> Product Product1 &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">WrapFactory</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Box <span class="title">WrapProduct</span>(<span class="params">Func&lt;Product&gt; getProduct, Action&lt;Product&gt; logCallback</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Box box = <span class="keyword">new</span> Box();</span><br><span class="line">            Product product = getProduct.Invoke();</span><br><span class="line">            <span class="keyword">if</span> (product.Price&gt;=<span class="number">50</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                logCallback(product);  <span class="comment">//如果价格大于50直接输出记录器中的结果</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            box.Product1 = product;</span><br><span class="line">            <span class="keyword">return</span> box;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">ProductFactory</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Product <span class="title">MakePizza</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Product product = <span class="keyword">new</span> Product();</span><br><span class="line">            product.Name = <span class="string">&quot;Pizza&quot;</span>;</span><br><span class="line">            product.Price = <span class="number">12</span>;</span><br><span class="line">            <span class="keyword">return</span> product;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Product <span class="title">MakeToyCar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Product product = <span class="keyword">new</span> Product();</span><br><span class="line">            product.Name = <span class="string">&quot;Toy Car&quot;</span>;</span><br><span class="line">            product.Price = <span class="number">100</span>;</span><br><span class="line">            <span class="keyword">return</span> product;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//回调关系：某个方法可以调用它，也可以不调用它。用得到的时候就调用它，用不到的时候就不调用它。且可以动态的选择后续</span></span><br><span class="line"><span class="comment">//          将被调用的方法（从多个方法中选择需要调用的）。</span></span><br><span class="line"><span class="comment">//回调方法：把委托类型的参数传入主调方法中去，被传入主调方法中的委托类型的参数内部封装着被回调的方法即回调方法。</span></span><br><span class="line"><span class="comment">//          主调函数根据自己的逻辑决定是否调用此方法。</span></span><br></pre></td></tr></table></figure>



<h3 id="8-4-委托的高级使用"><a href="#8-4-委托的高级使用" class="headerlink" title="8.4 委托的高级使用"></a>8.4 委托的高级使用</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210524211318.png" alt="委托的高级使用"></p>
<h4 id="8-4-1-多播委托"><a href="#8-4-1-多播委托" class="headerlink" title="8.4.1 多播委托"></a>8.4.1 多播委托</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Delegate5</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu1 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">1</span>, PenColor = ConsoleColor.Yellow &#125;;</span><br><span class="line">            Student stu2 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">2</span>, PenColor = ConsoleColor.Green &#125;;</span><br><span class="line">            Student stu3 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">3</span>, PenColor = ConsoleColor.Red &#125;;</span><br><span class="line">            Action action1 = <span class="keyword">new</span> Action(stu1.DoHomework);</span><br><span class="line">            Action action2 = <span class="keyword">new</span> Action(stu2.DoHomework);</span><br><span class="line">            Action action3 = <span class="keyword">new</span> Action(stu3.DoHomework);</span><br><span class="line"></span><br><span class="line">            action1 += action2;</span><br><span class="line">            action1 += action3;<span class="comment">//一个委托中封装多个方法：多播委托</span></span><br><span class="line"></span><br><span class="line">            action1.Invoke();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> ConsoleColor PenColor &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoHomework</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.ForegroundColor = <span class="keyword">this</span>.PenColor;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Student &#123;0&#125; doing homework &#123;1&#125; hour(s).&quot;</span>,<span class="keyword">this</span>.ID,i);</span><br><span class="line">                Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-4-2-隐式异步调用"><a href="#8-4-2-隐式异步调用" class="headerlink" title="8.4.2 隐式异步调用"></a>8.4.2 隐式异步调用</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Delegate5</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu1 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">1</span>, PenColor = ConsoleColor.Yellow &#125;;</span><br><span class="line">            Student stu2 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">2</span>, PenColor = ConsoleColor.Green &#125;;</span><br><span class="line">            Student stu3 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">3</span>, PenColor = ConsoleColor.Red &#125;;</span><br><span class="line">            Action action1 = <span class="keyword">new</span> Action(stu1.DoHomework);</span><br><span class="line">            Action action2 = <span class="keyword">new</span> Action(stu2.DoHomework);</span><br><span class="line">            Action action3 = <span class="keyword">new</span> Action(stu3.DoHomework);</span><br><span class="line"></span><br><span class="line">            action1.BeginInvoke(<span class="literal">null</span>, <span class="literal">null</span>);<span class="comment">//隐式异步调用</span></span><br><span class="line">            action2.BeginInvoke(<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">            action3.BeginInvoke(<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.ForegroundColor = ConsoleColor.Cyan;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Main thread &#123;0&#125;.&quot;</span>,i);</span><br><span class="line">                Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> ConsoleColor PenColor &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoHomework</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.ForegroundColor = <span class="keyword">this</span>.PenColor;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Student &#123;0&#125; doing homework &#123;1&#125; hour(s).&quot;</span>, <span class="keyword">this</span>.ID, i);</span><br><span class="line">                Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-4-3-显示异步调用"><a href="#8-4-3-显示异步调用" class="headerlink" title="8.4.3 显示异步调用"></a>8.4.3 显示异步调用</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Delegate5</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu1 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">1</span>, PenColor = ConsoleColor.Yellow &#125;;</span><br><span class="line">            Student stu2 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">2</span>, PenColor = ConsoleColor.Green &#125;;</span><br><span class="line">            Student stu3 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">3</span>, PenColor = ConsoleColor.Red &#125;;</span><br><span class="line">            Action action1 = <span class="keyword">new</span> Action(stu1.DoHomework);</span><br><span class="line">            Action action2 = <span class="keyword">new</span> Action(stu2.DoHomework);</span><br><span class="line">            Action action3 = <span class="keyword">new</span> Action(stu3.DoHomework);</span><br><span class="line"></span><br><span class="line">            Task task1 = <span class="keyword">new</span> Task(<span class="keyword">new</span> Action(stu1.DoHomework));<span class="comment">//显示的异步调用</span></span><br><span class="line">            Task task2 = <span class="keyword">new</span> Task(<span class="keyword">new</span> Action(stu2.DoHomework));</span><br><span class="line">            Task task3 = <span class="keyword">new</span> Task(action3);</span><br><span class="line"></span><br><span class="line">            task1.Start();</span><br><span class="line">            task2.Start();</span><br><span class="line">            task3.Start();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.ForegroundColor = ConsoleColor.Cyan;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Main thread &#123;0&#125;.&quot;</span>, i);</span><br><span class="line">                Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> ConsoleColor PenColor &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoHomework</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.ForegroundColor = <span class="keyword">this</span>.PenColor;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Student &#123;0&#125; doing homework &#123;1&#125; hour(s).&quot;</span>, <span class="keyword">this</span>.ID, i);</span><br><span class="line">                Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="8-5-使用接口取代委托"><a href="#8-5-使用接口取代委托" class="headerlink" title="8.5 使用接口取代委托"></a>8.5 使用接口取代委托</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Delegate3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            IProductFactory pizzaFactory = <span class="keyword">new</span> PizzaFactory();</span><br><span class="line">            IProductFactory toycarFactory = <span class="keyword">new</span> ToyCarFactory();</span><br><span class="line">            WrapFactory wrapFactory = <span class="keyword">new</span> WrapFactory();</span><br><span class="line"></span><br><span class="line">            Box box1 = wrapFactory.WrapProduct(pizzaFactory); </span><br><span class="line">            Box box2 = wrapFactory.WrapProduct(toycarFactory);</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(box1.Product1.Name);</span><br><span class="line">            Console.WriteLine(box2.Product1.Name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Box</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> Product Product1 &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">IProductFactory</span>  <span class="comment">//可以用接口取代委托</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">Product <span class="title">Make</span>(<span class="params"></span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">PizzaFactory</span> : <span class="title">IProductFactory</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Product <span class="title">Make</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Product product = <span class="keyword">new</span> Product();</span><br><span class="line">            product.Name = <span class="string">&quot;Pizza&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> product;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">ToyCarFactory</span> : <span class="title">IProductFactory</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Product <span class="title">Make</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Product product = <span class="keyword">new</span> Product();</span><br><span class="line">            product.Name = <span class="string">&quot;Toy Car&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> product;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">WrapFactory</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Box <span class="title">WrapProduct</span>(<span class="params">IProductFactory productFactory</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Box box = <span class="keyword">new</span> Box();</span><br><span class="line">            Product product = productFactory.Make();</span><br><span class="line">            box.Product1 = product;</span><br><span class="line">            <span class="keyword">return</span> box;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="8-6-Lambda表达式"><a href="#8-6-Lambda表达式" class="headerlink" title="8.6 Lambda表达式"></a>8.6 Lambda表达式</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Lambda1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>&gt; func1 = <span class="keyword">new</span> Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>&gt;((<span class="built_in">int</span> a, <span class="built_in">int</span> b) =&gt; &#123; <span class="keyword">return</span> a + b; &#125;);</span><br><span class="line">            <span class="comment">//                                                  把这两个参数a，b传入后面的方法体中。</span></span><br><span class="line">            <span class="comment">//                                          省略：1.因为前面已经声明了需要传入两个int类型的参数，所以此处</span></span><br><span class="line">            <span class="comment">//                                                  的两个int可以省略。(a,b)=&gt;&#123;return a + b;&#125;</span></span><br><span class="line">            <span class="built_in">int</span> res1 = func1(<span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line">            Console.WriteLine(res1);</span><br><span class="line">            Func&lt;<span class="built_in">int</span>,<span class="built_in">int</span>,<span class="built_in">int</span>&gt; func2 = (<span class="built_in">int</span> a, <span class="built_in">int</span> b) =&gt; &#123; <span class="keyword">return</span> a * b; &#125;;</span><br><span class="line">            <span class="comment">//                 省略：2.还可以直接把方法传给新创建的引用变量不用再new一个实例了。</span></span><br><span class="line">            <span class="built_in">int</span> res2 = func2(<span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line">            Console.WriteLine(res2);</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;====================&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            DoSomeCalc&lt;<span class="built_in">int</span>&gt;((<span class="built_in">int</span> a, <span class="built_in">int</span> b) =&gt; &#123; <span class="keyword">return</span> a * b; &#125;, <span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line">            <span class="comment">//       省略：3.直接把Lambda表达式当做委托类型的方法的形式参数传入方法中。</span></span><br><span class="line">            <span class="comment">//       终极省略版本：DoSomeCalc((a, b) =&gt; &#123; return a * b; &#125;, 100, 200);   泛型委托的类型推断</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DoSomeCalc</span>&lt;<span class="title">T</span>&gt;(<span class="params">Func&lt;T,T,T&gt; func,T x,T y</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            T res= func(x, y);</span><br><span class="line">            Console.WriteLine(res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="九、事件"><a href="#九、事件" class="headerlink" title="九、事件"></a>九、事件</h2><h3 id="9-1-事件的初介绍"><a href="#9-1-事件的初介绍" class="headerlink" title="9.1 事件的初介绍"></a>9.1 事件的初介绍</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210525201924.png" alt="初步了解事件"></p>
<h3 id="9-2-事件的应用"><a href="#9-2-事件的应用" class="headerlink" title="9.2 事件的应用"></a>9.2 事件的应用</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210525200018.png" alt="事件的应用"></p>
<h3 id="9-3-事件的初步了解"><a href="#9-3-事件的初步了解" class="headerlink" title="9.3 事件的初步了解"></a>9.3 事件的初步了解</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Event1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Timer timer = <span class="keyword">new</span> Timer();<span class="comment">//事件的拥有者：timer</span></span><br><span class="line">            timer.Interval = <span class="number">1000</span>;<span class="comment">//timer的时间间隔为一秒，即每过一秒钟就会触发一次timer的</span></span><br><span class="line">            Boy boy = <span class="keyword">new</span> Boy();<span class="comment">//事件的响应者：boy</span></span><br><span class="line">            Girl girl = <span class="keyword">new</span> Girl();</span><br><span class="line">            timer.Elapsed += boy.Action;<span class="comment">//事件：Elapsed</span></span><br><span class="line">                                        <span class="comment">//事件的订阅：timer.Elapsed += boy.Action(事件的订阅操作符：+=)</span></span><br><span class="line">                                        <span class="comment">//事件的订阅也可以理解为使事件的拥有者具备了通知事件响应者的能力。</span></span><br><span class="line"></span><br><span class="line">            timer.Elapsed += girl.Action;<span class="comment">//此时Elapsed事件有两个响应者：boy.Action和girl.Action。</span></span><br><span class="line">            <span class="comment">//此处可以理解为：把boy.Action与girl.Action放入到这个timer对象的事件中，使timer对象拥有可以通知Boy与Girl类</span></span><br><span class="line">            <span class="comment">//的能力。</span></span><br><span class="line"></span><br><span class="line">            timer.Start();<span class="comment">//将Timer.Enabled设置为true开始引发Timer.Elapsed事件</span></span><br><span class="line">            Console.ReadLine();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Boy</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">internal</span> <span class="keyword">void</span> <span class="title">Action</span>(<span class="params"><span class="built_in">object</span> sender, ElapsedEventArgs e</span>)<span class="comment">//事件的处理器：Action方法</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Jump!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Girl</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">internal</span> <span class="keyword">void</span> <span class="title">Action</span>(<span class="params"><span class="built_in">object</span> sender, ElapsedEventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Sing!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>在上例中，事件的拥有者timer拥有一个事件Elapsed，事件Elapsed分别被Boy与Girl类所订阅。当事件Elapsed发生时，timer可以通知Boy与Girl类，并且执行其中的Action方法即事件处理器作为响应。</li>
<li>订阅的具体操作就是把Boy与Girl中的Action方法添加到timer.Elapsed中去，使timer拥有调用Boy与Girl中Action方法的权力。</li>
</ul>
<h3 id="9-4-事件拥有者和响应者相互独立时"><a href="#9-4-事件拥有者和响应者相互独立时" class="headerlink" title="9.4 事件拥有者和响应者相互独立时"></a>9.4 事件拥有者和响应者相互独立时</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Event2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Form form = <span class="keyword">new</span> Form();<span class="comment">//事件的拥有者：form</span></span><br><span class="line">            Controller controller = <span class="keyword">new</span> Controller(form);<span class="comment">//事件的响应者：controller</span></span><br><span class="line">            form.ShowDialog();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Controller</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> Form form;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Controller</span>(<span class="params"> Form form1</span>)<span class="comment">//此方法是一个构造器，实现了给form赋值。</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (form1!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                form = form1;</span><br><span class="line">                form.Click += <span class="keyword">this</span>.FormClicked;<span class="comment">//this就为Controller的实例。</span></span><br><span class="line">                                               <span class="comment">//事件：Click</span></span><br><span class="line">                                               <span class="comment">//事件的订阅：form.Click += this.FormClicked;</span></span><br><span class="line">                                               <span class="comment">//            form.Click += controller.FormClicked;</span></span><br><span class="line">                                               <span class="comment">//当form.Click发生时调用controller.FormClicked方法</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FormClicked</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)<span class="comment">//事件的处理器：FormClicked</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.form.Text = DateTime.Now.ToString();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//此处事件的拥有者是form，拥有着Click事件。事件的响应者是Controller，当事件发生时通知响应者执行FormClicked方法。</span></span><br></pre></td></tr></table></figure>



<h3 id="9-5-事件的拥有者和响应者时同一个对象"><a href="#9-5-事件的拥有者和响应者时同一个对象" class="headerlink" title="9.5 事件的拥有者和响应者时同一个对象"></a>9.5 事件的拥有者和响应者时同一个对象</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Event3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            MyForm form = <span class="keyword">new</span> MyForm();<span class="comment">//事件的拥有者：form</span></span><br><span class="line">            form.Click+=form.FormClicked;<span class="comment">//为form添加一个方法让它自己处理自己的Click事件。</span></span><br><span class="line">                                         <span class="comment">//事件：Click</span></span><br><span class="line">                                         <span class="comment">//事件的响应者：form</span></span><br><span class="line">                                         <span class="comment">//事件的订阅：form.Click+=form.FormClicked</span></span><br><span class="line">            form.ShowDialog();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">MyForm</span> : <span class="title">Form</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">internal</span> <span class="keyword">void</span> <span class="title">FormClicked</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)<span class="comment">//事件的处理器：FormClicked</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.Text = DateTime.Now.ToString();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//此处的事件拥有者和响应者都是form，事件为Click，当事件发生时，调用自己的FormClicked方法。</span></span><br></pre></td></tr></table></figure>



<h3 id="9-6-事件的拥有者是事件响应者的一个字段成员"><a href="#9-6-事件的拥有者是事件响应者的一个字段成员" class="headerlink" title="9.6 事件的拥有者是事件响应者的一个字段成员"></a>9.6 事件的拥有者是事件响应者的一个字段成员</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Event4</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            MyForm form = <span class="keyword">new</span> MyForm();<span class="comment">//事件的响应者：form</span></span><br><span class="line">            form.ShowDialog();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">MyForm</span> : <span class="title">Form</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> TextBox textBox;</span><br><span class="line">        <span class="keyword">private</span> Button button;<span class="comment">//事件的拥有者：button (button为form的一个字段成员)</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyForm</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.textBox = <span class="keyword">new</span> TextBox();</span><br><span class="line">            <span class="keyword">this</span>.button = <span class="keyword">new</span> Button();</span><br><span class="line">            <span class="keyword">this</span>.Controls.Add(<span class="keyword">this</span>.button);</span><br><span class="line">            <span class="keyword">this</span>.Controls.Add(<span class="keyword">this</span>.textBox);</span><br><span class="line">            <span class="keyword">this</span>.button.Click += <span class="keyword">this</span>.ButtonClicked;<span class="comment">//事件：Click</span></span><br><span class="line">                                                    <span class="comment">//事件的订阅：this.button.Click += this.ButtonClicked</span></span><br><span class="line">            <span class="keyword">this</span>.button.Text = <span class="string">&quot;Say Hello&quot;</span>;</span><br><span class="line">            <span class="keyword">this</span>.button.Top = <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ButtonClicked</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)<span class="comment">//事件处理器：ButtonClicked</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.textBox.Text = <span class="string">&quot;Hello World!!!!!!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//事件的拥有者button拥有着事件Click，事件的拥有者是事件响应者form的一个字段成员，当事件发生时调用事件响应者的ButtonClicked方法。</span></span><br><span class="line"><span class="comment">//事件响应者用自己的方法订阅着自己的字段成员的某个事件。</span></span><br></pre></td></tr></table></figure>



<h3 id="9-7-事件的声明"><a href="#9-7-事件的声明" class="headerlink" title="9.7 事件的声明"></a>9.7 事件的声明</h3><h4 id="9-7-1-事件的完整声明和使用"><a href="#9-7-1-事件的完整声明和使用" class="headerlink" title="9.7.1 事件的完整声明和使用"></a>9.7.1 事件的完整声明和使用</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">EventStatement1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Customer customer = <span class="keyword">new</span> Customer();<span class="comment">//事件的拥有者：customer</span></span><br><span class="line">            Waiter waiter = <span class="keyword">new</span> Waiter();<span class="comment">//事件的响应者：waiter</span></span><br><span class="line">            customer.Order += waiter.Action;<span class="comment">//事件的订阅：customer.Order += waiter.Action</span></span><br><span class="line">                                            <span class="comment">//事件：Order</span></span><br><span class="line">            customer.Action2();</span><br><span class="line">            customer.PayTheBill();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OrderEventArgs</span>:<span class="title">EventArgs</span>  <span class="comment">//凡是传递事件数据的类都从EventArgs类中派生出来</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> DishName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Size &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">OrderEventHandler</span>(<span class="params">Customer customer, OrderEventArgs e</span>)</span>;<span class="comment">//声明委托类型</span></span><br><span class="line">                    <span class="comment">//此委托所封装的方法只能接受Customer类类型和OrderEventArgs类类型的参数</span></span><br><span class="line">                                                                                <span class="comment">//有EventHandler后缀的委托是用来声明事件的</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Customer</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> OrderEventHandler orderEventHandler;<span class="comment">//声明一个委托类型的字段，此字段用来存储事件处理器</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">event</span> OrderEventHandler Order  <span class="comment">//声明了一个委托类型的事件Order，意思是拿OrderEventHandler委托类型来约束事件</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">add</span>                               <span class="comment">//此事件中有两个方法add和remove，分别是把waiter.Action方法封装到事件中和从事件中去除。</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">this</span>.orderEventHandler += <span class="keyword">value</span>;<span class="comment">//把waiter.Action方法封装到委托中去，保证了被封装方法的两个参数分别是Customer与</span></span><br><span class="line">                                                <span class="comment">//OrderEventArgs类型的。</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">remove</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">this</span>.orderEventHandler -= <span class="keyword">value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="comment">//声明事件</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">double</span> Bill &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PayTheBill</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I will pay $&#123;0&#125;.&quot;</span>,<span class="keyword">this</span>.Bill);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">WalkIn</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Walk into the restaurant.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SitDown</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Sit down.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Think</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Let me think ...&quot;</span>);</span><br><span class="line">                Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.OnOrder(<span class="string">&quot;Kongpao Chicken&quot;</span>, <span class="string">&quot;large&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">OnOrder</span>(<span class="params"><span class="built_in">string</span> dishName,<span class="built_in">string</span> size</span>)<span class="comment">//触发事件的方法一般命名为On+事件名，且访问级别为protected</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.orderEventHandler != <span class="literal">null</span>)<span class="comment">//看看有没有人订阅这个事件，即存储事件处理器的委托是否为空。</span></span><br><span class="line">            &#123;</span><br><span class="line">                OrderEventArgs e = <span class="keyword">new</span> OrderEventArgs();</span><br><span class="line">                e.DishName = dishName;</span><br><span class="line">                e.Size = size;</span><br><span class="line">                <span class="keyword">this</span>.orderEventHandler.Invoke(<span class="keyword">this</span>, e);  <span class="comment">//调用委托封装的方法，即waiter.Action方法。</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Action2</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.ReadLine();  <span class="comment">//程序等我们敲完回车后再进行操作</span></span><br><span class="line">            <span class="keyword">this</span>.WalkIn();</span><br><span class="line">            <span class="keyword">this</span>.SitDown();</span><br><span class="line">            <span class="keyword">this</span>.Think();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Waiter</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Action</span>(<span class="params">Customer customer, OrderEventArgs e</span>)<span class="comment">//事件的处理器：Action</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I will serve you the dish-&#123;0&#125;&quot;</span>,e.DishName);</span><br><span class="line">            <span class="built_in">double</span> price = <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">switch</span> (e.Size)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;small&quot;</span>:</span><br><span class="line">                    price = price * <span class="number">0.5</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;large&quot;</span>:</span><br><span class="line">                    price = price * <span class="number">1.5</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="literal">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            customer.Bill += price;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//事件是基于委托的：1.事件需要一个委托类型来做一个约束，此约束既规定了事件可以发送什么样的消息给响应者，也规定了事件的</span></span><br><span class="line"><span class="comment">//                 响应者能收到什么样的消息(声明委托时规定的传入委托的参数类型必须和事件的处理器Action的参数类型一致)。</span></span><br><span class="line"><span class="comment">//                 这就决定了事件响应者的事件处理器必须与约束匹配上，事件响应者才能订阅此事件。</span></span><br><span class="line"><span class="comment">//               2.当事件的响应者向事件的拥有者提供了能够匹配这个事件的事件处理器之后，需要找个地方把这个事件</span></span><br><span class="line"><span class="comment">//                 处理器保存记录下来。而只有委托类型的实例才能记录和引用方法。</span></span><br><span class="line"><span class="comment">//事件从表层约束和底层实现都依赖委托类型。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//此例中，Order事件就相当于orderEventHandler委托字段的包装器。只让外界给这个字段添加或删减事件处理器。限制了外界对</span></span><br><span class="line"><span class="comment">//委托字段的访问。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//用protected保护的方法只能由此类和派生类所访问。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//事件是委托字段的包装器或者说是限制器，限制了外界对这个委托类型字段的访问。外界只能为委托添加或移除事件处理器。</span></span><br></pre></td></tr></table></figure>

<p>从上例可以看出：</p>
<ol>
<li>委托限制了订阅事件的事件响应者，而事件也将委托包装了起来使其不会被外界改变。</li>
<li>因为是事件封装了委托，所以委托是私有类型，也避免了在别的类中被直接访问。</li>
</ol>
<h4 id="9-7-2-不用事件保护委托字段的后果"><a href="#9-7-2-不用事件保护委托字段的后果" class="headerlink" title="9.7.2 不用事件保护委托字段的后果"></a>9.7.2 不用事件保护委托字段的后果</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">EventStatement3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.ReadLine();</span><br><span class="line">            Customer customer = <span class="keyword">new</span> Customer();</span><br><span class="line">            Waiter waiter = <span class="keyword">new</span> Waiter();</span><br><span class="line">            customer.Order += waiter.Action;</span><br><span class="line">            <span class="comment">//customer.Action2();</span></span><br><span class="line"></span><br><span class="line">            OrderEventArgs e1 = <span class="keyword">new</span> OrderEventArgs();</span><br><span class="line">            e1.DishName = <span class="string">&quot;Manhanquanxi&quot;</span>;</span><br><span class="line">            e1.Size = <span class="string">&quot;large&quot;</span>;</span><br><span class="line"></span><br><span class="line">            OrderEventArgs e2 = <span class="keyword">new</span> OrderEventArgs();</span><br><span class="line">            e2.DishName = <span class="string">&quot;Beer&quot;</span>;</span><br><span class="line">            e2.Size = <span class="string">&quot;large&quot;</span>;</span><br><span class="line"></span><br><span class="line">            Customer badGuy = <span class="keyword">new</span> Customer();</span><br><span class="line">            badGuy.Order += waiter.Action;</span><br><span class="line">            badGuy.Order.Invoke(customer, e1);</span><br><span class="line">            <span class="comment">//I will serve you the dish-Manhanquanxi</span></span><br><span class="line">            badGuy.Order.Invoke(customer, e2);<span class="comment">//如果Order不是事件而是委托字段，就导致可以在外部直接调用点菜方法，而且</span></span><br><span class="line">                                              <span class="comment">//传入的参数还能是别的对象</span></span><br><span class="line">            <span class="comment">//I will serve you the dish-Beer</span></span><br><span class="line">            </span><br><span class="line">            customer.PayTheBill();</span><br><span class="line">            <span class="comment">//I will pay $30.</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OrderEventArgs</span> : <span class="title">EventArgs</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> DishName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Size &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">OrderEventHandler</span>(<span class="params">Customer customer, OrderEventArgs e</span>)</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Customer</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span>  OrderEventHandler Order;<span class="comment">//由于没有事件，所以要让外界访问字段Order就必须设置为public</span></span><br><span class="line">                                        <span class="comment">//而这就导致了安全性的问题。</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">double</span> Bill &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PayTheBill</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I will pay $&#123;0&#125;.&quot;</span>, <span class="keyword">this</span>.Bill);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">WalkIn</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Walk into the restaurant.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SitDown</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Sit down.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Think</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Let me think ...&quot;</span>);</span><br><span class="line">                Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.Order != <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                OrderEventArgs e = <span class="keyword">new</span> OrderEventArgs();</span><br><span class="line">                e.DishName = <span class="string">&quot;Kongpao Chicken&quot;</span>;</span><br><span class="line">                e.Size = <span class="string">&quot;large&quot;</span>;</span><br><span class="line">                <span class="keyword">this</span>.Order.Invoke(<span class="keyword">this</span>, e);  <span class="comment">//调用委托封装的方法，即waiter.Action方法。</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Action2</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.ReadLine();</span><br><span class="line">            <span class="keyword">this</span>.WalkIn();</span><br><span class="line">            <span class="keyword">this</span>.SitDown();</span><br><span class="line">            <span class="keyword">this</span>.Think();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Waiter</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Action</span>(<span class="params">Customer customer, OrderEventArgs e</span>)  <span class="comment">//事件的处理器：Action</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I will serve you the dish-&#123;0&#125;&quot;</span>, e.DishName);</span><br><span class="line">            <span class="built_in">double</span> price = <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">switch</span> (e.Size)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;small&quot;</span>:</span><br><span class="line">                    price = price * <span class="number">0.5</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;large&quot;</span>:</span><br><span class="line">                    price = price * <span class="number">1.5</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="literal">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            customer.Bill += price;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-7-3-事件的简化声明"><a href="#9-7-3-事件的简化声明" class="headerlink" title="9.7.3 事件的简化声明"></a>9.7.3 事件的简化声明</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">EventStatement1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Customer customer = <span class="keyword">new</span> Customer();<span class="comment">//事件的拥有者：customer</span></span><br><span class="line">            Waiter waiter = <span class="keyword">new</span> Waiter();<span class="comment">//事件的响应者：waiter</span></span><br><span class="line">            customer.Order += waiter.Action;<span class="comment">//事件的订阅：customer.Order += waiter.Action</span></span><br><span class="line">                                            <span class="comment">//事件：Order</span></span><br><span class="line">            customer.Action2();</span><br><span class="line">            customer.PayTheBill();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OrderEventArgs</span> : <span class="title">EventArgs</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> DishName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Size &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">OrderEventHandler</span>(<span class="params">Customer customer, OrderEventArgs e</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Customer</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">event</span> OrderEventHandler Order;<span class="comment">//事件的简易声明</span></span><br><span class="line">                                             <span class="comment">//委托类型字段是存在的，只不过没出现在代码中，微软的语法糖搞定了。</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">double</span> Bill &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PayTheBill</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I will pay $&#123;0&#125;.&quot;</span>, <span class="keyword">this</span>.Bill);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">WalkIn</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Walk into the restaurant.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SitDown</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Sit down.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Think</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Let me think ...&quot;</span>);</span><br><span class="line">                Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.Order != <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                OrderEventArgs e = <span class="keyword">new</span> OrderEventArgs();</span><br><span class="line">                e.DishName = <span class="string">&quot;Kongpao Chicken&quot;</span>;</span><br><span class="line">                e.Size = <span class="string">&quot;large&quot;</span>;</span><br><span class="line">                <span class="keyword">this</span>.Order.Invoke(<span class="keyword">this</span>, e);<span class="comment">//调用委托封装的方法，即waiter.Action方法。</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Action2</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.ReadLine();</span><br><span class="line">            <span class="keyword">this</span>.WalkIn();</span><br><span class="line">            <span class="keyword">this</span>.SitDown();</span><br><span class="line">            <span class="keyword">this</span>.Think();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Waiter</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Action</span>(<span class="params">Customer customer, OrderEventArgs e</span>)<span class="comment">//事件的处理器：Action</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I will serve you the dish-&#123;0&#125;&quot;</span>, e.DishName);</span><br><span class="line">            <span class="built_in">double</span> price = <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">switch</span> (e.Size)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;small&quot;</span>:</span><br><span class="line">                    price = price * <span class="number">0.5</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;large&quot;</span>:</span><br><span class="line">                    price = price * <span class="number">1.5</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="literal">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            customer.Bill += price;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="9-8-事件与委托的关系"><a href="#9-8-事件与委托的关系" class="headerlink" title="9.8 事件与委托的关系"></a>9.8 事件与委托的关系</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210526202051.png" alt="事件与委托的关系"></p>
<h2 id="十、类的详解"><a href="#十、类的详解" class="headerlink" title="十、类的详解"></a>十、类的详解</h2><h3 id="10-1-构造器与静态成员和动态成员"><a href="#10-1-构造器与静态成员和动态成员" class="headerlink" title="10.1 构造器与静态成员和动态成员"></a>10.1 构造器与静态成员和动态成员</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Class1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu1 = <span class="keyword">new</span> Student(<span class="number">1</span>,<span class="string">&quot;Liu_yiqin&quot;</span>);</span><br><span class="line">            stu1.Report();</span><br><span class="line">            Console.WriteLine(Student.Amount);</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            Type t = <span class="keyword">typeof</span>(Student);  <span class="comment">//把Student类的类型存储在类型类的变量t中。</span></span><br><span class="line">            <span class="built_in">object</span> o = Activator.CreateInstance(t,<span class="number">1</span>,<span class="string">&quot;Liu_yiqin_2&quot;</span>);</span><br><span class="line">            Student stu2 = o <span class="keyword">as</span> Student;</span><br><span class="line">            Console.WriteLine(stu2.Name);</span><br><span class="line">            Console.WriteLine(Student.Amount);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> Amount &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;  <span class="comment">//静态成员,只能通过类名来访问不能通过对象来访问。</span></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="title">Student</span>(<span class="params"></span>)  <span class="comment">//静态构造器，只能构造静态成员</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Amount = <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Student</span>(<span class="params"><span class="built_in">int</span> id,<span class="built_in">string</span> name</span>)  <span class="comment">//此处为实例构造器。构造器的名字必须和类名一致；构造器无返回值</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.ID = id;</span><br><span class="line">            <span class="keyword">this</span>.Name = name;</span><br><span class="line">            Amount++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ~Student()<span class="comment">//析构器</span></span><br><span class="line">        &#123;</span><br><span class="line">            Amount--;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Bye bye! Release the system resources...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Report</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;I&#x27;m #<span class="subst">&#123;ID&#125;</span> student, my name is <span class="subst">&#123;Name&#125;</span>.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>new Student()中的()为默认构造器，默认构造器不接受任何参数，作用是把所有字段清成默认值(值类型的都变为0，引用类型的都变为null。</li>
</ul>
<h3 id="10-2-类的访问级别"><a href="#10-2-类的访问级别" class="headerlink" title="10.2 类的访问级别"></a>10.2 类的访问级别</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> MyLib.MyNamespace;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Class2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Calculator calc = <span class="keyword">new</span> Calculator(); <span class="comment">//通过using，Class2名称空间中可以调用MyLib.MyNamespace名称空间的类</span></span><br><span class="line">            <span class="built_in">double</span> res = calc.Add(<span class="number">1.1</span>, <span class="number">2.2</span>);</span><br><span class="line">            Console.WriteLine(res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">MyLib.MyNamespace</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Calculator</span>  <span class="comment">//此处的public为类访问级别修饰符</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">double</span> <span class="title">Add</span>(<span class="params"><span class="built_in">double</span> a,<span class="built_in">double</span> b</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Calculator2</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">double</span> <span class="title">Min</span>(<span class="params"><span class="built_in">double</span> a,<span class="built_in">double</span> b</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">return</span> a - b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>类可以声明在：<pre><code>                   1.名称空间里
                   2.显示的名称空间外
                   3.当做成员类声明在类里
               
</code></pre>
</li>
<li>internal class Calculator2就等于class Calculator2，意思是只有在MyLib这个名称空间中可以自由访问Calculator2类。要在别的名称空间访问只能用public类。</li>
</ul>
<h3 id="10-3-类的继承与派生-访问级别"><a href="#10-3-类的继承与派生-访问级别" class="headerlink" title="10.3 类的继承与派生(访问级别)"></a>10.3 类的继承与派生(访问级别)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Class3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Type t = <span class="keyword">typeof</span>(Car);</span><br><span class="line">            Type tb = t.BaseType;</span><br><span class="line">            Console.WriteLine(tb.FullName);  <span class="comment">//证明了Car从Vehicle派生而来。            </span></span><br><span class="line">            <span class="comment">//Class3.Vehicle</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;===============&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            Car car = <span class="keyword">new</span> Car();</span><br><span class="line">            Console.WriteLine(car <span class="keyword">is</span> Vehicle);  <span class="comment">//一个子类的实例从语义上讲也是父类的实例。</span></span><br><span class="line">            <span class="comment">//True</span></span><br><span class="line">            Console.WriteLine(car <span class="keyword">is</span> Object);</span><br><span class="line">            <span class="comment">//True</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;===============&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            Vehicle vehicle = <span class="keyword">new</span> Car();<span class="comment">//可以用父类型的变量引用子类型的实例。</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Car</span>:<span class="title">Vehicle</span>  <span class="comment">//Car从Vehicle派生而来，即Car继承了Vehicle。</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>所有的类型都是从object派生而来的。</li>
<li>是一个：一个子类的实例从语义上讲也是父类的实例；一个派生类的实例语义上讲也是基类的实例。</li>
<li>可以用父类型的变量引用子类型的实例。</li>
<li>sealed class Vehicle{} 表示Vehicle是一个封闭类，此类不可有派生类。</li>
<li>C#中一个类只允许有一个基类。</li>
<li>子类的访问级别不能超过父类的访问级别，反之可以。</li>
</ul>
<h3 id="10-4-类的继承与派生-继承链"><a href="#10-4-类的继承与派生-继承链" class="headerlink" title="10.4 类的继承与派生(继承链)"></a>10.4 类的继承与派生(继承链)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Class3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Car car = <span class="keyword">new</span> Car();</span><br><span class="line">            Console.WriteLine(car.Owner);<span class="comment">//继承链上的类创建实例的时候，从基类的构造器开始执行，先构造基类对象，再一</span></span><br><span class="line">                                         <span class="comment">//级级的往下构造，最终构造出想构造的子类对象。</span></span><br><span class="line">            car.ShowOwner();<span class="comment">//此处Owner已被改变</span></span><br><span class="line">            <span class="comment">//Car Owner</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Vehicle</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.Owner = <span class="string">&quot;N/A&quot;</span>;  <span class="comment">//this关键字：用这个类构建出来的对象它自身</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Owner &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Car</span> : <span class="title">Vehicle</span>  </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Car</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.Owner = <span class="string">&quot;Car Owner&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ShowOwner</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="keyword">base</span>.Owner); <span class="comment">//base关键字只能向上访问一层父类</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">RaceCar</span> : <span class="title">Car</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>继承的本质：派生类在基类已有的成员的基础之上进行横向(类成员在数量上的扩充)或纵向(类成员在版本上的扩充，即重写overwrite)上的扩展。</li>
</ul>
<h3 id="10-5-类的继承与派生-构造器"><a href="#10-5-类的继承与派生-构造器" class="headerlink" title="10.5 类的继承与派生(构造器)"></a>10.5 类的继承与派生(构造器)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Class3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Car car = <span class="keyword">new</span> Car(<span class="string">&quot;Liu_yiqin&quot;</span>);</span><br><span class="line">            Console.WriteLine(car.Owner);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Vehicle</span>(<span class="params"><span class="built_in">string</span> owner</span>) <span class="comment">//一旦给出了带参数的构造器之后编译器就不再创建默认构造器了，这就导致子类无法调用基类                                      //的默认构造器</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.Owner = owner;  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Owner &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Car</span> : <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Car</span>(<span class="params"><span class="built_in">string</span> owner</span>):<span class="title">base</span>(<span class="params">owner</span>)  <span class="comment">//把形参owner传给Vehicle</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>父类的实例构造器不被子类所继承</li>
</ul>
<h3 id="10-6-类的继承与派生-访问级别"><a href="#10-6-类的继承与派生-访问级别" class="headerlink" title="10.6 类的继承与派生(访问级别)"></a>10.6 类的继承与派生(访问级别)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> MyLib;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Class6</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Car car = <span class="keyword">new</span> Car();</span><br><span class="line">            car.TurboAccelerate();</span><br><span class="line">            Console.WriteLine(car.Speed);</span><br><span class="line">            <span class="comment">//30</span></span><br><span class="line">            Bus bus = <span class="keyword">new</span> Bus();</span><br><span class="line">            bus.SlowAccelerate();</span><br><span class="line">            Console.WriteLine(bus.Speed);</span><br><span class="line">            <span class="comment">//5</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Bus</span> : <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SlowAccelerate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Burn(<span class="number">1</span>);</span><br><span class="line">            _rpm += <span class="number">500</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">MyLib</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">protected</span> <span class="built_in">int</span> _rpm;</span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> _fuel;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Refuel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            _fuel = <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">Burn</span>(<span class="params"><span class="built_in">int</span> fuel</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            _fuel-=fuel;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Accelerate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Burn(<span class="number">1</span>);</span><br><span class="line">            _rpm += <span class="number">1000</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Speed &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> _rpm / <span class="number">100</span>; &#125; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Car</span>:<span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TurboAccelerate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Burn(<span class="number">2</span>);</span><br><span class="line">            _rpm += <span class="number">3000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>类成员的访问级别是以类的访问级别为上限的。</li>
<li>internal是把成员的访问级别限制在名称空间内。</li>
<li>protected是把成员的访问级别限制在继承链上，可跨程序集 PS：1.protected多用在方法上 2.可与internal一起用。</li>
<li>private是把成员的访问级别限制在类的类体里(继承的子类也不可访问) PS：private为默认的访问级别。</li>
</ul>
<h3 id="10-7-重写与多态"><a href="#10-7-重写与多态" class="headerlink" title="10.7 重写与多态"></a>10.7 重写与多态</h3><h4 id="10-7-1-方法的重写"><a href="#10-7-1-方法的重写" class="headerlink" title="10.7.1 方法的重写"></a>10.7.1 方法的重写</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Class_Override</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Vehicle c = <span class="keyword">new</span> RaceCar1();  <span class="comment">//多态</span></span><br><span class="line">            c.Run();  <span class="comment">//Car中的Run()已经被RaseCar重写了</span></span><br><span class="line">            <span class="comment">//Rase car is running!</span></span><br><span class="line"></span><br><span class="line">            Vehicle v = <span class="keyword">new</span> RaceCar2();</span><br><span class="line">            v.Run();<span class="comment">//调用Run()时顺着继承链调用，调用到Car时就已经到头了。因为RaceCar2里面没有用overwrite重写，RaceCar2                     //里面的Run方法时另一个Run方法，不是继承链上的Run方法。而此处的引用变量v是Vehicle类型的，所以调用的是                     //继承链上的Run方法。</span></span><br><span class="line">            <span class="comment">//Car is running!</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I&#x27;m running!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Car</span> : <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Car is running!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">RaceCar1</span> : <span class="title">Car</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Rase car is running!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">RaceCar2</span> : <span class="title">Car</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)  <span class="comment">//此处的Run方法为新建的Run方法，不是继承链上的Run方法</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Rase car is running!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>构成重写关系时：父类被重写的成员要加上virtual，子类重写的成员要加上overwrite。</li>
<li>多态：当用父类的变量引用子类的实例时，调用被重写的成员时总是调用出来继承链上最新的版本。</li>
</ul>
<h4 id="10-7-2-属性的重写"><a href="#10-7-2-属性的重写" class="headerlink" title="10.7.2 属性的重写"></a>10.7.2 属性的重写</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Class_Override2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Vehicle v = <span class="keyword">new</span> Vehicle();</span><br><span class="line">            v.Run();</span><br><span class="line">            Console.WriteLine(v.Speed);</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            Vehicle c = <span class="keyword">new</span> Car();</span><br><span class="line">            c.Run();</span><br><span class="line">            Console.WriteLine(c.Speed);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> _speed;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">int</span> Speed</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> _speed; &#125;</span><br><span class="line">            <span class="keyword">set</span> &#123; _speed = <span class="keyword">value</span>; &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;I&#x27;m running!&quot;</span>);</span><br><span class="line">            _speed = <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Car</span> : <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> _rpm;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">int</span> Speed  <span class="comment">//对属性的重写</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> _rpm / <span class="number">100</span>; &#125;</span><br><span class="line">            <span class="keyword">set</span> &#123; _rpm = <span class="keyword">value</span> * <span class="number">100</span>; &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Car is running!&quot;</span>);</span><br><span class="line">            _rpm = <span class="number">5000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>重写的条件：函数成员(方法、属性等)，可见，签名一致</li>
</ul>
<h3 id="10-8-抽象类与开闭原则"><a href="#10-8-抽象类与开闭原则" class="headerlink" title="10.8 抽象类与开闭原则"></a>10.8 抽象类与开闭原则</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">VirtualClass_o</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Vehicle v = <span class="keyword">new</span> Car();</span><br><span class="line">            v.Run();  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Vehicle</span>  <span class="comment">//抽象类。以基类类型来声明变量，并且引用已经实现抽象功能的子类的实例来玩多态。</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Stop</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Stopped!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fill</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Pay and fill...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Car</span>:<span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Car is running...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Truck</span>:<span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Truck is running...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>抽象类：函数成员没有被完全实现的类。抽象类为复用而生。</li>
<li>1.抽象类的成员不能是private的。2.不能实例化抽象类</li>
<li>开闭原则：我们应该封装那些不变的稳定的固定的和确定的成员，把那些不确定的有可能改变的成员声明为抽象成员留给子类实<br>现。继承抽象类的子类必须实现所有抽象方法，不然该子类也要是抽象类。</li>
</ul>
<h2 id="十一、接口"><a href="#十一、接口" class="headerlink" title="十一、接口"></a>十一、接口</h2><h3 id="11-1-接口的初步介绍"><a href="#11-1-接口的初步介绍" class="headerlink" title="11.1 接口的初步介绍"></a>11.1 接口的初步介绍</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Interface</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">IVehicle</span>  <span class="comment">//接口：纯虚类，纯抽象类，所有成员都是抽象的。</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Stop</span>(<span class="params"></span>)</span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Fill</span>(<span class="params"></span>)</span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Vehicle</span>: <span class="title">IVehicle</span>  <span class="comment">//此抽象类Vehicle不完全实现了IVehicle接口。剩下的抽象方法留给子类实现。</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Stop</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Stopped!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fill</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Pay and fill...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Car</span> : <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Car is running...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Truck</span> : <span class="title">Vehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Truck is running...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接口是纯抽象类，所有成员都是抽象的。</p>
<h3 id="11-2-接口与抽象类"><a href="#11-2-接口与抽象类" class="headerlink" title="11.2 接口与抽象类"></a>11.2 接口与抽象类</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210527110614.png" alt="QQ截图20210527110556"></p>
<h3 id="11-3-接口的初步使用"><a href="#11-3-接口的初步使用" class="headerlink" title="11.3 接口的初步使用"></a>11.3 接口的初步使用</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Interface2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span>[] nums1 = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">            ArrayList nums2 = <span class="keyword">new</span> ArrayList &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(Sum(nums1));</span><br><span class="line">            Console.WriteLine(Avg(nums1));</span><br><span class="line">            Console.WriteLine(Sum(nums2));</span><br><span class="line">            Console.WriteLine(Avg(nums2));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Sum</span>(<span class="params">IEnumerable nums</span>)  <span class="comment">//因为int和ArrayList都是基于IEnumerable接口的</span></span></span><br><span class="line"><span class="function">                                          <span class="comment">//nums是子类的实例，也是父类的实例。</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> n <span class="keyword">in</span> nums)</span><br><span class="line">            &#123;</span><br><span class="line">                sum += (<span class="built_in">int</span>)n;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="built_in">double</span> <span class="title">Avg</span>(<span class="params">IEnumerable nums</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">double</span> count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> n <span class="keyword">in</span> nums)</span><br><span class="line">            &#123;</span><br><span class="line">                sum += (<span class="built_in">int</span>)n;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum / count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="11-4-接口解耦合"><a href="#11-4-接口解耦合" class="headerlink" title="11.4 接口解耦合"></a>11.4 接口解耦合</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Interface3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">var</span> user1 = <span class="keyword">new</span> PhoneUser(<span class="keyword">new</span> NokiaPhone());</span><br><span class="line">            user1.UsePhone();</span><br><span class="line">            <span class="keyword">var</span> user2 = <span class="keyword">new</span> PhoneUser(<span class="keyword">new</span> EricssonPhone());</span><br><span class="line">            user2.UsePhone();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">IPhone</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Dail</span>(<span class="params"></span>)</span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">PickUp</span>(<span class="params"></span>)</span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Send</span>(<span class="params"></span>)</span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Receive</span>(<span class="params"></span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">PhoneUser</span>  <span class="comment">//PhoneUser这个类通过IPhone这个NokiaPhone与EricssonPhone的公共接口来使用这两个具体类，再通</span></span><br><span class="line">                     <span class="comment">//过多态来实现每个类中的具体操作。</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> IPhone _phone;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">PhoneUser</span>(<span class="params">IPhone phone</span>)  <span class="comment">//使用接口之后就使耦合变松了，更换手机后只需要更改传入的参数即可。</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            _phone = phone;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UsePhone</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            _phone.Dail();</span><br><span class="line">            _phone.PickUp();</span><br><span class="line">            _phone.Send();</span><br><span class="line">            _phone.Receive();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">NokiaPhone</span> : <span class="title">IPhone</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dail</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Nokia calling...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PickUp</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Hello! This is Tim!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Receive</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Nokia message ring...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Send</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Hello!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  <span class="comment">//当类去实现接口时，类与接口是紧耦合。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">EricssonPhone</span> : <span class="title">IPhone</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dail</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Ericsson calling...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PickUp</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Hi! This&#x27;s Tim!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Receive</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Ericsson ring...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Send</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Good evening!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此处PhoneUser类的构造函数类似于委托中使用的模板方法，可以自行选择传入的子类，从而实现不同的功能。</p>
<h3 id="11-5-接口功能的完美图示"><a href="#11-5-接口功能的完美图示" class="headerlink" title="11.5 接口功能的完美图示"></a>11.5 接口功能的完美图示</h3><p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210527113351.png" alt="接口(完美图示)"></p>
<h3 id="11-6-接口在单元测试中的使用"><a href="#11-6-接口在单元测试中的使用" class="headerlink" title="11.6 接口在单元测试中的使用"></a>11.6 接口在单元测试中的使用</h3><h3 id="11-7-继承链上的类对方法的声明"><a href="#11-7-继承链上的类对方法的声明" class="headerlink" title="11.7 继承链上的类对方法的声明"></a>11.7 继承链上的类对方法的声明</h3><p><img src="C:\Users\61644\Desktop\20210512131315.png" alt="20210418004007"></p>
<ul>
<li>类实现接口方法：public+方法</li>
<li>抽象类实现接口方法：public+abstract+方法</li>
<li>类实现接口方法(此方法为Virtual，可被子类重写)：public+virtual+方法</li>
<li>类重写virtual方法：public+override+方法</li>
</ul>
<h3 id="11-8-接口隔离原则"><a href="#11-8-接口隔离原则" class="headerlink" title="11.8 接口隔离原则"></a>11.8 接口隔离原则</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">lspExample</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">var</span> driver = <span class="keyword">new</span> Driver(<span class="keyword">new</span> LightTank());</span><br><span class="line">            driver.Drive();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Driver</span>  <span class="comment">//因为此处Driver只需要Run()方法，而IVehicle接口中也只有这个方法所以符合接口隔离原则。</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> IVehicle _vehicle;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Driver</span>(<span class="params">IVehicle vehicle</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            _vehicle = vehicle;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Drive</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            _vehicle.Run();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">IVehicle</span>  <span class="comment">//通过ITank接口，使坦克和车都隶属于IVehicle接口，使用户可以通过IVehicle同时调用不同的Run()方法</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Car</span> : <span class="title">IVehicle</span>  </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Car is running...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Truck</span> : <span class="title">IVehicle</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Truck is running...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">IWeapon</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Fire</span>(<span class="params"></span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">ITank</span>:<span class="title">IVehicle</span>,<span class="title">IWeapon</span>  <span class="comment">//C#中一个类只能有一个基类，却可以有多个基接口。</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">LightTank</span> : <span class="title">ITank</span>  <span class="comment">//现在坦克通过ITank接口同时实现了Fire()与Run()功能。</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fire</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Boom!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Ka ka ka...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">MediumTank</span> : <span class="title">ITank</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fire</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Boom!!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Ka! ka! ka!...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">HeavyTank</span> : <span class="title">ITank</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fire</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Boom!!!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Ka!! ka!! ka!!...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//接口隔离原则：服务的调用者不会拿到多余的方法。</span></span><br></pre></td></tr></table></figure>



<h3 id="11-9-显示接口实现"><a href="#11-9-显示接口实现" class="headerlink" title="11.9 显示接口实现"></a>11.9 显示接口实现</h3><h3 id="11-10反射与依赖注入"><a href="#11-10反射与依赖注入" class="headerlink" title="11.10反射与依赖注入"></a>11.10反射与依赖注入</h3><h3 id="11-11-反射与更松的耦合"><a href="#11-11-反射与更松的耦合" class="headerlink" title="11.11 反射与更松的耦合"></a>11.11 反射与更松的耦合</h3><h2 id="十二、泛型"><a href="#十二、泛型" class="headerlink" title="十二、泛型"></a>十二、泛型</h2><h3 id="12-1-两种膨胀"><a href="#12-1-两种膨胀" class="headerlink" title="12.1 两种膨胀"></a>12.1 两种膨胀</h3><p>类型膨胀</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210527121533.png" alt="类型膨胀"></p>
<p>成员膨胀</p>
<p><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210527121551.png" alt="成员膨胀"></p>
<h3 id="12-2-泛型类避免膨胀"><a href="#12-2-泛型类避免膨胀" class="headerlink" title="12.2 泛型类避免膨胀"></a>12.2 泛型类避免膨胀</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Generic</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Apple apple = <span class="keyword">new</span> Apple() &#123; Color = <span class="string">&quot;Red&quot;</span> &#125;;</span><br><span class="line">            Book book = <span class="keyword">new</span> Book() &#123; Name = <span class="string">&quot;New Book&quot;</span> &#125;;</span><br><span class="line">            Box&lt;Apple&gt; box1 = <span class="keyword">new</span> Box&lt;Apple&gt;() &#123; Cargo = apple &#125;;  <span class="comment">//泛型特化：把Box泛型特化成装苹果的类型</span></span><br><span class="line">                                                                   <span class="comment">//用Apple类型替换了TCargo这个类型，于是Cargo属性的类型就变为了Apple类型</span></span><br><span class="line">            Box&lt;Book&gt; box2 = <span class="keyword">new</span> Box&lt;Book&gt;() &#123; Cargo = book &#125;;</span><br><span class="line">            Console.WriteLine(box1.Cargo.Color);</span><br><span class="line">            Console.WriteLine(box2.Cargo.Name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Book</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Apple</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Color &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Box</span>&lt;<span class="title">TCargo</span>&gt;           <span class="comment">//泛型的Box类</span></span><br><span class="line">                                <span class="comment">//尖括号里写的是类型参数，即标识符；代表一个泛化的类型。</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> TCargo Cargo &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;   <span class="comment">//TCargo类型的属性Cargo，此处Cargo为TCargo类的一个对象</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="12-3-泛型接口"><a href="#12-3-泛型接口" class="headerlink" title="12.3 泛型接口"></a>12.3 泛型接口</h3><h4 id="12-3-1-类中实现泛型接口"><a href="#12-3-1-类中实现泛型接口" class="headerlink" title="12.3.1 类中实现泛型接口"></a>12.3.1 类中实现泛型接口</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">InterfaceGeneric</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student&lt;<span class="built_in">int</span>&gt; stu1 = <span class="keyword">new</span> Student&lt;<span class="built_in">int</span>&gt;();</span><br><span class="line">            Student&lt;<span class="built_in">ulong</span>&gt; stu2 = <span class="keyword">new</span> Student&lt;<span class="built_in">ulong</span>&gt;();</span><br><span class="line">            stu1.ID = <span class="number">101</span>;</span><br><span class="line">            stu1.Name = <span class="string">&quot;Liu&quot;</span>;</span><br><span class="line">            stu2.ID = <span class="number">1000000000000001</span>;</span><br><span class="line">            stu2.Name = <span class="string">&quot;Liu&quot;</span>;</span><br><span class="line">            Console.WriteLine(stu1.ID);</span><br><span class="line">            Console.WriteLine(stu1.Name);</span><br><span class="line">            Console.WriteLine(stu2.ID);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">IUnique</span>&lt;<span class="title">TId</span>&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        TId ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span>&lt;<span class="title">TId</span>&gt; : <span class="title">IUnique</span>&lt;<span class="title">TId</span>&gt;  <span class="comment">//用Student类实现了泛型接口，Student类也变成了泛型类</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> TId ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="12-3-2-继承特化之后的泛型接口"><a href="#12-3-2-继承特化之后的泛型接口" class="headerlink" title="12.3.2 继承特化之后的泛型接口"></a>12.3.2 继承特化之后的泛型接口</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">InterfaceGeneric2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student student = <span class="keyword">new</span> Student();</span><br><span class="line">            student.ID = <span class="number">10000000001</span>;</span><br><span class="line">            student.Name = <span class="string">&quot;Name&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">IUnique</span>&lt;<span class="title">TId</span>&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        TId ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span> : <span class="title">IUnique</span>&lt;<span class="title">ulong</span>&gt;  <span class="comment">//Student类在继承泛型接口的时候就特化泛型，此时Student类就不是泛型类了</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">ulong</span> ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="12-4-带有多个类型参数的泛型"><a href="#12-4-带有多个类型参数的泛型" class="headerlink" title="12.4 带有多个类型参数的泛型"></a>12.4 带有多个类型参数的泛型</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Generic2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            IDictionary&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt; dict = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt;();  <span class="comment">//使用特化后的接口类型变量引用特化后的Dictionary类型实例</span></span><br><span class="line">            dict[<span class="number">1</span>] = <span class="string">&quot;Liu&quot;</span>;</span><br><span class="line">            dict[<span class="number">2</span>] = <span class="string">&quot;Michael&quot;</span>;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Student #1 is <span class="subst">&#123;dict[<span class="number">1</span>]&#125;</span>&quot;</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Student #2 is <span class="subst">&#123;dict[<span class="number">2</span>]&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//C#中$的用法：是为了替代string.format()。原先赋值需要占位符和变量，当需要拼接多个变量会造成语句过长等不易理解问题</span></span><br></pre></td></tr></table></figure>



<h3 id="12-5-泛型方法"><a href="#12-5-泛型方法" class="headerlink" title="12.5 泛型方法"></a>12.5 泛型方法</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">FunctionGeneric</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="built_in">int</span>[] a1 = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">            <span class="built_in">int</span>[] a2 = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> &#125;;</span><br><span class="line">            <span class="built_in">double</span>[] a3 = &#123; <span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>, <span class="number">4.4</span>, <span class="number">5.5</span> &#125;;</span><br><span class="line">            <span class="built_in">double</span>[] a4 = &#123; <span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>, <span class="number">4.4</span>, <span class="number">5.5</span>, <span class="number">6.6</span> &#125;;</span><br><span class="line">            <span class="keyword">var</span> result = Zip(a3, a4);   <span class="comment">//泛型方法在调用时可以自动推断类型参数。</span></span><br><span class="line">            Console.WriteLine(<span class="built_in">string</span>.Join(<span class="string">&quot;,&quot;</span>,result));</span><br><span class="line">            <span class="comment">//1.1,1.1,2.2,2.2,3.3,3.3,4.4,4.4,5.5,5.5,6.6</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> T[] <span class="title">Zip</span>&lt;<span class="title">T</span>&gt;(<span class="params">T[] a, T[] b</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            T[] zipped = <span class="keyword">new</span> T[a.Length + b.Length];</span><br><span class="line">            <span class="built_in">int</span> ai = <span class="number">0</span>, bi = <span class="number">0</span>, zi = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">do</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (ai &lt; a.Length) zipped[zi++] = a[ai++];</span><br><span class="line">                <span class="keyword">if</span> (bi &lt; b.Length) zipped[zi++] = b[bi++];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (ai &lt; a.Length || bi &lt; b.Length);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> zipped;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="12-6-泛型委托"><a href="#12-6-泛型委托" class="headerlink" title="12.6 泛型委托"></a>12.6 泛型委托</h3><h4 id="12-6-1-Action"><a href="#12-6-1-Action" class="headerlink" title="12.6.1 Action"></a>12.6.1 Action</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">DelegateGeneric</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Action&lt;<span class="built_in">string</span>&gt; a1 = Say;</span><br><span class="line">            <span class="comment">//Action&lt;引用方法的参数类型与个数&gt;</span></span><br><span class="line">            a1.Invoke(<span class="string">&quot;Liu&quot;</span>);</span><br><span class="line">            Action&lt;<span class="built_in">int</span>&gt; a2 = Mul;  <span class="comment">//Action泛型委托只能引用没有返回值的方法</span></span><br><span class="line">            a2(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Say</span>(<span class="params">String str</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Hello, <span class="subst">&#123;str&#125;</span>!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Mul</span>(<span class="params"><span class="built_in">int</span> x</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(x*<span class="number">100</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="12-6-2-Function"><a href="#12-6-2-Function" class="headerlink" title="12.6.2 Function"></a>12.6.2 Function</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">DelegateGeneric2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>&gt; func1 = Add;</span><br><span class="line">            <span class="comment">//Func&lt;引用方法的类型参数,引用方法的类型参数,引用方法的返回值类型&gt;</span></span><br><span class="line">            <span class="keyword">var</span> result1 = func1(<span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line">            Console.WriteLine(result1);</span><br><span class="line">            Func&lt;<span class="built_in">double</span>, <span class="built_in">double</span>, <span class="built_in">double</span>&gt; func2 = Add;</span><br><span class="line">            <span class="keyword">var</span> result2 = func2(<span class="number">100.1</span>, <span class="number">200.2</span>);</span><br><span class="line">            Console.WriteLine(result2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params"><span class="built_in">int</span> a,<span class="built_in">int</span> b</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="built_in">double</span> <span class="title">Add</span>(<span class="params"><span class="built_in">double</span> a,<span class="built_in">double</span> b</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="12-7-泛型委托与Lambda表达式"><a href="#12-7-泛型委托与Lambda表达式" class="headerlink" title="12.7 泛型委托与Lambda表达式"></a>12.7 泛型委托与Lambda表达式</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">DelegateGeneric_Lambda</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Func&lt;<span class="built_in">double</span>, <span class="built_in">double</span>, <span class="built_in">double</span>&gt; func1 = (<span class="built_in">double</span> a, <span class="built_in">double</span> b) =&gt; &#123; <span class="keyword">return</span> a + b; &#125;;</span><br><span class="line">            <span class="keyword">var</span> result = func1(<span class="number">100.1</span>, <span class="number">200.2</span>);</span><br><span class="line">            Console.WriteLine(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Lambda表达式：对于简单的方法，在调用的地方直接匿名声明。</span></span><br></pre></td></tr></table></figure>



<h2 id="十三、枚举类型"><a href="#十三、枚举类型" class="headerlink" title="十三、枚举类型"></a>十三、枚举类型</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Enum</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Person person=<span class="keyword">new</span> Person();</span><br><span class="line">            person.Level = Level.Employee;</span><br><span class="line">            person.Name = <span class="string">&quot;Timothy&quot;</span>;</span><br><span class="line">            person.Skill = Skill.Cook | Skill.Drive | Skill.Program | Skill.Teach;<span class="comment">//按位取或，保证了技能可以叠加</span></span><br><span class="line">            Console.WriteLine(person.Skill);</span><br><span class="line">            Console.WriteLine((person.Skill&amp;Skill.Cook)&gt;<span class="number">0</span>);  <span class="comment">//按位取与，只有两个位上都是1才为1</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line"></span><br><span class="line">            Person boss = <span class="keyword">new</span> Person();</span><br><span class="line">            boss.Level = Level.Boss;</span><br><span class="line">            Console.WriteLine(boss.Level&gt;person.Level);</span><br><span class="line">            Console.WriteLine((<span class="built_in">int</span>)Level.Employee);</span><br><span class="line">            Console.WriteLine((<span class="built_in">int</span>)Level.Manager);</span><br><span class="line">            Console.WriteLine((<span class="built_in">int</span>)Level.Boss);</span><br><span class="line">            Console.WriteLine((<span class="built_in">int</span>)Level.BigBoss);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">enum</span> Level  <span class="comment">//枚举类型的本质其实是一些限制了取值范围的整数</span></span><br><span class="line">    &#123;</span><br><span class="line">        Employee=<span class="number">100</span>,</span><br><span class="line">        Manager,</span><br><span class="line">        Boss=<span class="number">300</span>,</span><br><span class="line">        BigBoss,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">enum</span> Skill  <span class="comment">//枚举类型的比特位用法</span></span><br><span class="line">    &#123;</span><br><span class="line">        Drive=<span class="number">1</span>,  <span class="comment">//二进制为：0001</span></span><br><span class="line">        Cook=<span class="number">2</span>,   <span class="comment">//          0010</span></span><br><span class="line">        Program=<span class="number">4</span>,<span class="comment">//          0100</span></span><br><span class="line">        Teach=<span class="number">8</span>,  <span class="comment">//          1000</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> Level Level &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> Skill Skill &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="十四、结构体"><a href="#十四、结构体" class="headerlink" title="十四、结构体"></a>十四、结构体</h2><h3 id="14-1-装箱与拆箱"><a href="#14-1-装箱与拆箱" class="headerlink" title="14.1 装箱与拆箱"></a>14.1 装箱与拆箱</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Struct</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student student = <span class="keyword">new</span> Student() &#123; ID = <span class="number">101</span>, Name = <span class="string">&quot;Liu&quot;</span> &#125;;</span><br><span class="line">            <span class="comment">//student这个变量是一个局部变量，分配在main函数的函数栈上。关联的栈上内存直接存储的是一个Student的实例。</span></span><br><span class="line">            <span class="built_in">object</span> obj = student;</span><br><span class="line">            <span class="comment">//把Student这个实例做了一个copy，丢到内存堆中去。用obj这个变量引用着堆内存中的Student实例。装箱</span></span><br><span class="line">            Student student2 = (Student)obj;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;#<span class="subst">&#123;student2.ID&#125;</span> Name:<span class="subst">&#123;student2.Name&#125;</span>&quot;</span>);  <span class="comment">//拆箱</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> Student</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="14-2-结构体知识点"><a href="#14-2-结构体知识点" class="headerlink" title="14.2 结构体知识点"></a>14.2 结构体知识点</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Struct2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Student stu1 = <span class="keyword">new</span> Student() &#123; ID = <span class="number">101</span>, Name = <span class="string">&quot;Liu&quot;</span> &#125;;</span><br><span class="line">            Student stu2 = stu1;  <span class="comment">//结构体类型为值类型</span></span><br><span class="line">                                  <span class="comment">//赋的不是引用而是完整的copy，stu2里面关联的学生对象与stu1里关联的学生对象是两个对象。</span></span><br><span class="line">            stu2.ID = <span class="number">1001</span>;</span><br><span class="line">            stu2.Name = <span class="string">&quot;Mike&quot;</span>;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Name1:<span class="subst">&#123;stu1.Name&#125;</span>, Name2:<span class="subst">&#123;stu2.Name&#125;</span>&quot;</span>);</span><br><span class="line">            stu1.Speak();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title">ISpeak</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Speak</span>(<span class="params"></span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> Student:ISpeak  <span class="comment">//结构体可以实现接口</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//public Student()  显示无参构造器</span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Speak</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;I&#x27;m #<span class="subst">&#123;<span class="keyword">this</span>.ID&#125;</span> student <span class="subst">&#123;<span class="keyword">this</span>.Name&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体不能有基类与基结构体，也就是说结构体不能由基类与基结构体派生而来。</span></span><br><span class="line"><span class="comment">//结构体不能够拥有显示的无参构造器。</span></span><br></pre></td></tr></table></figure>





















































</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">刘一钦</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2021/03/07/C-sharp/">http://example.com/2021/03/07/C-sharp/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">刘一钦的成长之路</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C#</a></div><div class="post_share"><div class="social-share" data-image="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210731140002.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/03/17/Python/"><img class="prev-cover" src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210803142842.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Python初学习</div></div></a></div><div class="next-post pull-right"><a href="/2021/03/01/UnityKnowledge/"><img class="next-cover" src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210803144953.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Unity扩展知识点</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/07/31/C-Sharp_API/" title="C#与Unity中的常用API"><img class="cover" src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_2/20210307151121.png!webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-31</div><div class="title">C#与Unity中的常用API</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">刘一钦</div><div class="author-info__description">眼前已是星辰大海，又何必刻舟求剑</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">技术，源于积累</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#C-%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3"><span class="toc-text">C#语言入门详解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%B1%BB%E4%B8%8E%E6%88%90%E5%91%98"><span class="toc-text">一、类与成员</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%88%9D%E6%AD%A5%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.1 初步介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E7%BD%97%E6%B1%89%E5%A1%94-%E9%80%92%E5%BD%92"><span class="toc-text">1.2 罗汉塔(递归)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%8F%98%E9%87%8F%E4%B8%8E%E4%B8%8E%E5%AF%B9%E8%B1%A1"><span class="toc-text">二、变量与与对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%8F%98%E9%87%8F%E4%B8%8E%E5%9C%B0%E5%9D%80"><span class="toc-text">2.1 变量与地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%96%B9%E6%B3%95%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E8%B0%83%E7%94%A8"><span class="toc-text">三、方法的定义与调用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-text">3.1 类的构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%96%B9%E6%B3%95%E7%9A%84%E9%87%8D%E8%BD%BD"><span class="toc-text">3.2 方法的重载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%93%8D%E4%BD%9C%E7%AC%A6%E8%AF%A6%E8%A7%A3"><span class="toc-text">四、操作符详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E6%93%8D%E4%BD%9C%E7%AC%A6%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">4.1 操作符的优先级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E4%B8%8D%E4%B8%A2%E5%A4%B1%E7%B2%BE%E5%BA%A6%E7%9A%84%E9%9A%90%E5%BC%8F%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">4.2 不丢失精度的隐式类型转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%93%8D%E4%BD%9C%E7%AC%A6-1"><span class="toc-text">4.3 操作符(1)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E6%93%8D%E4%BD%9C%E7%AC%A6-2"><span class="toc-text">4.4 操作符(2)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E6%93%8D%E4%BD%9C%E7%AC%A6-3"><span class="toc-text">4.5 操作符(3)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E6%93%8D%E4%BD%9C%E7%AC%A6-4"><span class="toc-text">4.6 操作符(4)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E8%A1%A8%E8%BE%BE%E5%BC%8F%E3%80%81%E8%AF%AD%E5%8F%A5%E8%AF%A6%E8%A7%A3"><span class="toc-text">五、表达式、语句详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-switch%E8%AF%AD%E5%8F%A5"><span class="toc-text">5.1 switch语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-try%E8%AF%AD%E5%8F%A5"><span class="toc-text">5.2 try语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-do%E8%AF%AD%E5%8F%A5"><span class="toc-text">5.3 do语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-continue%E3%80%81break%E8%AF%AD%E5%8F%A5"><span class="toc-text">5.4 continue、break语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E8%BF%AD%E4%BB%A3%E8%AF%AD%E5%8F%A5"><span class="toc-text">5.5 迭代语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%AD%97%E6%AE%B5%E3%80%81%E5%B1%9E%E6%80%A7%E3%80%81%E7%B4%A2%E5%BC%95%E5%99%A8%E5%92%8C%E5%B8%B8%E9%87%8F"><span class="toc-text">六、字段、属性、索引器和常量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%AD%97%E6%AE%B5"><span class="toc-text">6.1 字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E5%B1%9E%E6%80%A7"><span class="toc-text">6.2 属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1-%E5%B1%9E%E6%80%A7%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86"><span class="toc-text">6.2.1 属性的基本知识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-2-%E8%BF%94%E5%9B%9E%E5%80%BC%E5%8A%A8%E6%80%81%E5%8F%98%E5%8C%96%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-text">6.2.2 返回值动态变化的属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E7%B4%A2%E5%BC%95%E5%99%A8"><span class="toc-text">6.3 索引器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E5%B8%B8%E9%87%8F"><span class="toc-text">6.4 常量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%8F%82%E6%95%B0%E5%8F%8A%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95"><span class="toc-text">七、参数及扩展方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E4%BC%A0%E5%80%BC%E5%8F%82%E6%95%B0"><span class="toc-text">7.1 传值参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-1-%E4%BC%A0%E9%80%92%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">7.1.1 传递值类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-2-%E4%BC%A0%E9%80%92%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">7.1.2 传递引用类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%BC%95%E7%94%A8%E5%8F%82%E6%95%B0"><span class="toc-text">7.2 引用参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1-%E4%BC%A0%E9%80%92%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">7.2.1 传递值类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-2-%E4%BC%A0%E9%80%92%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">7.2.2 传递引用类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-text">7.3 输出参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-1-%E5%80%BC%E7%B1%BB%E5%9E%8B%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-text">7.3.1 值类型输出参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-2-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-text">7.3.2 引用类型输出参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-3-%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-text">7.3.3 数组类型输出参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-4-%E5%85%B7%E5%90%8D%E7%B1%BB%E5%9E%8B%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-text">7.3.4 具名类型输出参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95"><span class="toc-text">7.4 扩展方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-%E5%8F%82%E6%95%B0%E6%80%BB%E7%BB%93"><span class="toc-text">7.5 参数总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%A7%94%E6%89%98"><span class="toc-text">八、委托</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E5%88%9D%E8%AF%86%E5%A7%94%E6%89%98-%E4%B8%A4%E7%A7%8D%E5%B8%B8%E8%A7%81%E5%A7%94%E6%89%98"><span class="toc-text">8.1 初识委托(两种常见委托)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%A7%94%E6%89%98%E7%9A%84%E5%A3%B0%E6%98%8E%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="toc-text">8.2 委托的声明与使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E5%A7%94%E6%89%98%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8"><span class="toc-text">8.3 委托的两种常见使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-1-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95"><span class="toc-text">8.3.1 模板方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-2-%E5%9B%9E%E8%B0%83%E6%96%B9%E6%B3%95"><span class="toc-text">8.3.2 回调方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E5%A7%94%E6%89%98%E7%9A%84%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8"><span class="toc-text">8.4 委托的高级使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-1-%E5%A4%9A%E6%92%AD%E5%A7%94%E6%89%98"><span class="toc-text">8.4.1 多播委托</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-2-%E9%9A%90%E5%BC%8F%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8"><span class="toc-text">8.4.2 隐式异步调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-3-%E6%98%BE%E7%A4%BA%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8"><span class="toc-text">8.4.3 显示异步调用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3%E5%8F%96%E4%BB%A3%E5%A7%94%E6%89%98"><span class="toc-text">8.5 使用接口取代委托</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">8.6 Lambda表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E4%BA%8B%E4%BB%B6"><span class="toc-text">九、事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%88%9D%E4%BB%8B%E7%BB%8D"><span class="toc-text">9.1 事件的初介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">9.2 事件的应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BA%86%E8%A7%A3"><span class="toc-text">9.3 事件的初步了解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E4%BA%8B%E4%BB%B6%E6%8B%A5%E6%9C%89%E8%80%85%E5%92%8C%E5%93%8D%E5%BA%94%E8%80%85%E7%9B%B8%E4%BA%92%E7%8B%AC%E7%AB%8B%E6%97%B6"><span class="toc-text">9.4 事件拥有者和响应者相互独立时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-%E4%BA%8B%E4%BB%B6%E7%9A%84%E6%8B%A5%E6%9C%89%E8%80%85%E5%92%8C%E5%93%8D%E5%BA%94%E8%80%85%E6%97%B6%E5%90%8C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="toc-text">9.5 事件的拥有者和响应者时同一个对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-%E4%BA%8B%E4%BB%B6%E7%9A%84%E6%8B%A5%E6%9C%89%E8%80%85%E6%98%AF%E4%BA%8B%E4%BB%B6%E5%93%8D%E5%BA%94%E8%80%85%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%88%90%E5%91%98"><span class="toc-text">9.6 事件的拥有者是事件响应者的一个字段成员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="toc-text">9.7 事件的声明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-7-1-%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%AE%8C%E6%95%B4%E5%A3%B0%E6%98%8E%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-text">9.7.1 事件的完整声明和使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-7-2-%E4%B8%8D%E7%94%A8%E4%BA%8B%E4%BB%B6%E4%BF%9D%E6%8A%A4%E5%A7%94%E6%89%98%E5%AD%97%E6%AE%B5%E7%9A%84%E5%90%8E%E6%9E%9C"><span class="toc-text">9.7.2 不用事件保护委托字段的后果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-7-3-%E4%BA%8B%E4%BB%B6%E7%9A%84%E7%AE%80%E5%8C%96%E5%A3%B0%E6%98%8E"><span class="toc-text">9.7.3 事件的简化声明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-%E4%BA%8B%E4%BB%B6%E4%B8%8E%E5%A7%94%E6%89%98%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">9.8 事件与委托的关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E7%B1%BB%E7%9A%84%E8%AF%A6%E8%A7%A3"><span class="toc-text">十、类的详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E6%9E%84%E9%80%A0%E5%99%A8%E4%B8%8E%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%92%8C%E5%8A%A8%E6%80%81%E6%88%90%E5%91%98"><span class="toc-text">10.1 构造器与静态成员和动态成员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E7%B1%BB%E7%9A%84%E8%AE%BF%E9%97%AE%E7%BA%A7%E5%88%AB"><span class="toc-text">10.2 类的访问级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%B4%BE%E7%94%9F-%E8%AE%BF%E9%97%AE%E7%BA%A7%E5%88%AB"><span class="toc-text">10.3 类的继承与派生(访问级别)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%B4%BE%E7%94%9F-%E7%BB%A7%E6%89%BF%E9%93%BE"><span class="toc-text">10.4 类的继承与派生(继承链)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%B4%BE%E7%94%9F-%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-text">10.5 类的继承与派生(构造器)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%B4%BE%E7%94%9F-%E8%AE%BF%E9%97%AE%E7%BA%A7%E5%88%AB"><span class="toc-text">10.6 类的继承与派生(访问级别)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-7-%E9%87%8D%E5%86%99%E4%B8%8E%E5%A4%9A%E6%80%81"><span class="toc-text">10.7 重写与多态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-7-1-%E6%96%B9%E6%B3%95%E7%9A%84%E9%87%8D%E5%86%99"><span class="toc-text">10.7.1 方法的重写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-7-2-%E5%B1%9E%E6%80%A7%E7%9A%84%E9%87%8D%E5%86%99"><span class="toc-text">10.7.2 属性的重写</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99"><span class="toc-text">10.8 抽象类与开闭原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E6%8E%A5%E5%8F%A3"><span class="toc-text">十一、接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BB%8B%E7%BB%8D"><span class="toc-text">11.1 接口的初步介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E6%8E%A5%E5%8F%A3%E4%B8%8E%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-text">11.2 接口与抽象类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8"><span class="toc-text">11.3 接口的初步使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-%E6%8E%A5%E5%8F%A3%E8%A7%A3%E8%80%A6%E5%90%88"><span class="toc-text">11.4 接口解耦合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-%E6%8E%A5%E5%8F%A3%E5%8A%9F%E8%83%BD%E7%9A%84%E5%AE%8C%E7%BE%8E%E5%9B%BE%E7%A4%BA"><span class="toc-text">11.5 接口功能的完美图示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-%E6%8E%A5%E5%8F%A3%E5%9C%A8%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">11.6 接口在单元测试中的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-7-%E7%BB%A7%E6%89%BF%E9%93%BE%E4%B8%8A%E7%9A%84%E7%B1%BB%E5%AF%B9%E6%96%B9%E6%B3%95%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="toc-text">11.7 继承链上的类对方法的声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-8-%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99"><span class="toc-text">11.8 接口隔离原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-9-%E6%98%BE%E7%A4%BA%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0"><span class="toc-text">11.9 显示接口实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-10%E5%8F%8D%E5%B0%84%E4%B8%8E%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5"><span class="toc-text">11.10反射与依赖注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-11-%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%9B%B4%E6%9D%BE%E7%9A%84%E8%80%A6%E5%90%88"><span class="toc-text">11.11 反射与更松的耦合</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E6%B3%9B%E5%9E%8B"><span class="toc-text">十二、泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-%E4%B8%A4%E7%A7%8D%E8%86%A8%E8%83%80"><span class="toc-text">12.1 两种膨胀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E6%B3%9B%E5%9E%8B%E7%B1%BB%E9%81%BF%E5%85%8D%E8%86%A8%E8%83%80"><span class="toc-text">12.2 泛型类避免膨胀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-%E6%B3%9B%E5%9E%8B%E6%8E%A5%E5%8F%A3"><span class="toc-text">12.3 泛型接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-3-1-%E7%B1%BB%E4%B8%AD%E5%AE%9E%E7%8E%B0%E6%B3%9B%E5%9E%8B%E6%8E%A5%E5%8F%A3"><span class="toc-text">12.3.1 类中实现泛型接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-3-2-%E7%BB%A7%E6%89%BF%E7%89%B9%E5%8C%96%E4%B9%8B%E5%90%8E%E7%9A%84%E6%B3%9B%E5%9E%8B%E6%8E%A5%E5%8F%A3"><span class="toc-text">12.3.2 继承特化之后的泛型接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-4-%E5%B8%A6%E6%9C%89%E5%A4%9A%E4%B8%AA%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%E7%9A%84%E6%B3%9B%E5%9E%8B"><span class="toc-text">12.4 带有多个类型参数的泛型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-5-%E6%B3%9B%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-text">12.5 泛型方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-6-%E6%B3%9B%E5%9E%8B%E5%A7%94%E6%89%98"><span class="toc-text">12.6 泛型委托</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-6-1-Action"><span class="toc-text">12.6.1 Action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-6-2-Function"><span class="toc-text">12.6.2 Function</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-7-%E6%B3%9B%E5%9E%8B%E5%A7%94%E6%89%98%E4%B8%8ELambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">12.7 泛型委托与Lambda表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B"><span class="toc-text">十三、枚举类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-text">十四、结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-%E8%A3%85%E7%AE%B1%E4%B8%8E%E6%8B%86%E7%AE%B1"><span class="toc-text">14.1 装箱与拆箱</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-%E7%BB%93%E6%9E%84%E4%BD%93%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">14.2 结构体知识点</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/07/31/C-Sharp_API/" title="C#与Unity中的常用API"><img src="https://myfirstblog.oss-cn-hangzhou.aliyuncs.com/typoraImages_2/20210307151121.png!webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C#与Unity中的常用API"/></a><div class="content"><a class="title" href="/2021/07/31/C-Sharp_API/" title="C#与Unity中的常用API">C#与Unity中的常用API</a><time datetime="2021-07-30T16:00:00.000Z" title="发表于 2021-07-31 00:00:00">2021-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/26/Unity3DPhysicalSystem/" title="3D物理系统初学习"><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210803143607.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="3D物理系统初学习"/></a><div class="content"><a class="title" href="/2021/07/26/Unity3DPhysicalSystem/" title="3D物理系统初学习">3D物理系统初学习</a><time datetime="2021-07-25T16:00:00.000Z" title="发表于 2021-07-26 00:00:00">2021-07-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/20/Json/" title="Json文件的解析"><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210803140500.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Json文件的解析"/></a><div class="content"><a class="title" href="/2021/07/20/Json/" title="Json文件的解析">Json文件的解析</a><time datetime="2021-07-19T16:00:00.000Z" title="发表于 2021-07-20 00:00:00">2021-07-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/15/DataStructureCode/" title="数据结构代码详解"><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210803141844.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据结构代码详解"/></a><div class="content"><a class="title" href="/2021/07/15/DataStructureCode/" title="数据结构代码详解">数据结构代码详解</a><time datetime="2021-07-14T16:00:00.000Z" title="发表于 2021-07-15 00:00:00">2021-07-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/01/DesignPattern/" title="设计模式"><img src="https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210803110214.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="设计模式"/></a><div class="content"><a class="title" href="/2021/07/01/DesignPattern/" title="设计模式">设计模式</a><time datetime="2021-06-30T16:00:00.000Z" title="发表于 2021-07-01 00:00:00">2021-07-01</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://study-liu.oss-cn-shanghai.aliyuncs.com/study/20210802151513.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 刘一钦</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        addClass: [200,() => {
          document.querySelectorAll('mjx-container:not([display=\'true\']').forEach( node => {
            const target = node.parentNode
            if (!target.classList.contains('has-jax')) {
              target.classList.add('mathjax-overflow')
            }
          })
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>